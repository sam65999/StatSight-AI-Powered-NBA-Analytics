(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,77088,e=>{"use strict";var s=e.i(43476),t=e.i(71645);function r({query:e,isOpen:r,onClose:l}){let[a,d]=(0,t.useState)(!1);if(!r||!e)return null;let n=e=>(0,s.jsxs)("span",{className:`px-3 py-1 rounded-full text-sm font-semibold ${{High:"bg-green-100 text-green-800",Medium:"bg-yellow-100 text-yellow-800",Low:"bg-orange-100 text-orange-800"}[e]}`,children:[e," Confidence"]});return(0,s.jsx)("div",{className:"fixed inset-0 z-50 overflow-y-auto",onClick:l,children:(0,s.jsxs)("div",{className:"flex items-center justify-center min-h-screen px-4 pt-4 pb-20 text-center sm:p-0",children:[(0,s.jsx)("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm transition-opacity"}),(0,s.jsxs)("div",{className:"relative inline-block align-bottom bg-card/95 backdrop-blur-md rounded-xl border border-border/50 text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-3xl sm:w-full",onClick:e=>e.stopPropagation(),children:[(0,s.jsx)("div",{className:"bg-gradient-to-r from-blue-600 to-purple-600 px-6 py-4",children:(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:"text-xl font-bold text-white",children:"Query Details"}),(0,s.jsx)("p",{className:"text-sm text-blue-100 mt-1",children:new Date(e.created_at).toLocaleString("en-US",{month:"long",day:"numeric",year:"numeric",hour:"numeric",minute:"2-digit",hour12:!0})})]}),(0,s.jsx)("button",{onClick:l,className:"text-white hover:text-gray-200 transition-colors",children:(0,s.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})}),(0,s.jsxs)("div",{className:"px-6 py-6",children:[(0,s.jsx)("div",{className:"mb-6",children:(0,s.jsx)("span",{className:`inline-block px-4 py-2 rounded-full text-sm font-semibold ${(e=>{switch(e){case"AI Prediction - Player Prop":return"bg-blue-100 text-blue-800";case"AI Prediction - Game Outcome":return"bg-purple-100 text-purple-800";case"Player Stats":return"bg-green-100 text-green-800";case"Player Comparison":return"bg-orange-100 text-orange-800";default:return"bg-gray-100 text-gray-800"}})(e.query_type)}`,children:e.query_type})}),(0,s.jsx)("div",{className:"mb-6",children:(()=>{switch(e.query_type){case"AI Prediction - Player Prop":let t;return t=e.details,(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-sm text-muted-foreground mb-1",children:"Player"}),(0,s.jsx)("p",{className:"font-semibold text-foreground",children:t.playerName}),t.team&&(0,s.jsx)("p",{className:"text-sm text-muted-foreground",children:t.team})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-sm text-muted-foreground mb-1",children:"Prop Type"}),(0,s.jsx)("p",{className:"font-semibold text-foreground capitalize",children:t.propType})]})]}),(0,s.jsxs)("div",{className:"bg-primary/10 rounded-lg p-4",children:[(0,s.jsx)("p",{className:"text-sm text-muted-foreground mb-1",children:"Prediction"}),(0,s.jsxs)("p",{className:"text-xl font-bold text-foreground",children:[t.overUnder.toUpperCase()," ",t.threshold," ",t.propType]}),t.projectedValue&&(0,s.jsxs)("p",{className:"text-sm text-muted-foreground mt-1",children:["Projected: ",t.projectedValue.toFixed(1)," ",t.propType]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-sm text-muted-foreground mb-2",children:"AI Recommendation"}),(0,s.jsx)("p",{className:"text-lg font-semibold text-blue-600",children:t.prediction})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-sm text-muted-foreground mb-2",children:"Confidence"}),n(t.confidence)]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-sm text-muted-foreground mb-2",children:"Analysis"}),(0,s.jsx)("p",{className:"text-foreground leading-relaxed",children:t.reasoning})]}),t.statsUsed&&t.statsUsed.length>0&&(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-sm text-muted-foreground mb-2",children:"Key Statistics Used"}),(0,s.jsx)("ul",{className:"space-y-1",children:t.statsUsed.map((e,t)=>(0,s.jsxs)("li",{className:"text-sm text-muted-foreground",children:["â€¢ ",e]},t))})]})]});case"AI Prediction - Game Outcome":let r;return r=e.details,(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{className:"bg-purple-500/10 rounded-lg p-4",children:[(0,s.jsx)("p",{className:"text-sm text-muted-foreground mb-2",children:"Matchup"}),(0,s.jsxs)("p",{className:"text-xl font-bold text-foreground",children:[r.team1," vs ",r.team2]}),r.gameDate&&(0,s.jsx)("p",{className:"text-sm text-muted-foreground mt-1",children:r.gameDate})]}),r.liveScore&&(0,s.jsxs)("div",{className:"bg-destructive/10 rounded-lg p-4 border-l-4 border-destructive",children:[(0,s.jsx)("p",{className:"text-sm text-destructive font-semibold mb-1",children:"live"===r.liveScore.status?"ðŸ”´ LIVE":"FINAL"}),(0,s.jsxs)("p",{className:"text-foreground",children:[r.team1,": ",r.liveScore.team1Score," | ",r.team2,": ",r.liveScore.team2Score]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-sm text-muted-foreground mb-2",children:"Predicted Winner"}),(0,s.jsx)("p",{className:"text-2xl font-bold text-purple-600",children:r.winner}),r.scorePrediction&&(0,s.jsxs)("p",{className:"text-sm text-muted-foreground mt-1",children:["Score: ",r.scorePrediction]})]}),r.winProbability&&(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-sm text-muted-foreground mb-2",children:"Win Probability"}),(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)("div",{className:"flex-1 bg-secondary rounded-full h-3",children:(0,s.jsx)("div",{className:"h-3 rounded-full bg-gradient-to-r from-purple-600 to-purple-400",style:{width:`${r.winProbability}%`}})}),(0,s.jsxs)("span",{className:"text-lg font-bold text-foreground",children:[r.winProbability,"%"]})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-sm text-muted-foreground mb-2",children:"Confidence"}),n(r.confidence)]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-sm text-muted-foreground mb-2",children:"Analysis"}),(0,s.jsx)("p",{className:"text-foreground leading-relaxed",children:r.reasoning})]}),r.keyFactors&&r.keyFactors.length>0&&(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-sm text-muted-foreground mb-2",children:"Key Factors"}),(0,s.jsx)("ul",{className:"space-y-1",children:r.keyFactors.map((e,t)=>(0,s.jsxs)("li",{className:"text-sm text-muted-foreground",children:["â€¢ ",e]},t))})]})]});case"Player Stats":let l;return l=e.details,(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-sm text-muted-foreground mb-1",children:"Player"}),(0,s.jsx)("p",{className:"text-2xl font-bold text-foreground",children:l.playerName}),(0,s.jsx)("p",{className:"text-muted-foreground",children:l.team}),l.position&&(0,s.jsx)("p",{className:"text-sm text-muted-foreground mt-1",children:l.position})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-sm text-muted-foreground mb-2",children:"Status"}),(0,s.jsx)("span",{className:`px-3 py-1 rounded-full text-sm font-semibold ${l.isActive?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"}`,children:l.isActive?"â— Active":"Inactive"})]}),l.headlineStats&&(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-sm text-muted-foreground mb-3",children:"Headline Stats"}),(0,s.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3",children:[(0,s.jsxs)("div",{className:"bg-primary/10 rounded-lg p-3",children:[(0,s.jsx)("p",{className:"text-xs text-muted-foreground",children:"PPG"}),(0,s.jsx)("p",{className:"text-xl font-bold text-blue-600",children:l.headlineStats.pts.toFixed(1)})]}),(0,s.jsxs)("div",{className:"bg-green-500/10 rounded-lg p-3",children:[(0,s.jsx)("p",{className:"text-xs text-muted-foreground",children:"RPG"}),(0,s.jsx)("p",{className:"text-xl font-bold text-green-600",children:l.headlineStats.reb.toFixed(1)})]}),(0,s.jsxs)("div",{className:"bg-purple-500/10 rounded-lg p-3",children:[(0,s.jsx)("p",{className:"text-xs text-muted-foreground",children:"APG"}),(0,s.jsx)("p",{className:"text-xl font-bold text-purple-600",children:l.headlineStats.ast.toFixed(1)})]}),(0,s.jsxs)("div",{className:"bg-orange-500/10 rounded-lg p-3",children:[(0,s.jsx)("p",{className:"text-xs text-muted-foreground",children:"PIE"}),(0,s.jsx)("p",{className:"text-xl font-bold text-orange-600",children:l.headlineStats.pie.toFixed(3)})]})]})]})]});case"Player Comparison":let a;return a=e.details,(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{className:"bg-primary/10 rounded-lg p-4",children:[(0,s.jsx)("p",{className:"text-sm text-muted-foreground mb-1",children:"Player 1"}),(0,s.jsx)("p",{className:"text-lg font-bold text-foreground",children:a.player1.name}),(0,s.jsx)("p",{className:"text-sm text-muted-foreground",children:a.player1.team})]}),(0,s.jsxs)("div",{className:"bg-green-500/10 rounded-lg p-4",children:[(0,s.jsx)("p",{className:"text-sm text-muted-foreground mb-1",children:"Player 2"}),(0,s.jsx)("p",{className:"text-lg font-bold text-foreground",children:a.player2.name}),(0,s.jsx)("p",{className:"text-sm text-muted-foreground",children:a.player2.team})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-sm text-muted-foreground mb-1",children:"Season"}),(0,s.jsx)("p",{className:"font-semibold text-foreground",children:a.season})]}),a.comparisonStats&&(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-sm text-muted-foreground mb-3",children:"Comparison Stats"}),(0,s.jsx)("div",{className:"space-y-2",children:Object.entries(a.comparisonStats).map(([e,t])=>t&&"object"==typeof t&&"player1"in t&&"player2"in t?(0,s.jsxs)("div",{className:"bg-secondary/30 rounded-lg p-3",children:[(0,s.jsx)("p",{className:"text-xs text-muted-foreground mb-2 capitalize",children:e}),(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsx)("span",{className:"text-sm font-semibold text-blue-600",children:"number"==typeof t.player1?t.player1.toFixed(1):t.player1}),(0,s.jsx)("span",{className:"text-xs text-muted-foreground/70",children:"vs"}),(0,s.jsx)("span",{className:"text-sm font-semibold text-green-600",children:"number"==typeof t.player2?t.player2.toFixed(1):t.player2})]})]},e):null)})]})]});default:return(0,s.jsx)("p",{className:"text-muted-foreground",children:"Unknown query type"})}})()}),(0,s.jsxs)("div",{className:"border-t pt-4",children:[(0,s.jsxs)("button",{onClick:()=>d(!a),className:"text-sm text-blue-600 hover:text-blue-700 font-medium",children:[a?"â–¼ Hide":"â–¶ Show"," Raw JSON"]}),a&&(0,s.jsx)("pre",{className:"mt-3 p-4 bg-secondary/30 rounded-lg text-xs overflow-x-auto text-foreground",children:JSON.stringify(e,null,2)})]})]}),(0,s.jsx)("div",{className:"bg-secondary/30 px-6 py-4",children:(0,s.jsx)("button",{onClick:l,className:"w-full px-4 py-2 bg-primary text-primary-foreground rounded-lg hover:bg-primary/90 transition-all hover:scale-105 active:scale-95 font-medium",children:"Close"})})]})]})})}function l(){let[e,l]=(0,t.useState)([]),[a,d]=(0,t.useState)([]),[n,o]=(0,t.useState)(!0),[i,c]=(0,t.useState)(null),[m,x]=(0,t.useState)(null),[u,p]=(0,t.useState)(!1),[h,g]=(0,t.useState)("all"),[b,j]=(0,t.useState)(null);(0,t.useEffect)(()=>{f()},[]),(0,t.useEffect)(()=>{e.length>0&&y()},[h,e]);let f=async()=>{o(!0),c(null);try{let e=await fetch("/api/queries?limit=100"),s=await e.json();if(!e.ok||!s.success)throw Error(s.error||"Failed to fetch queries");l(s.queries),v(s.queries),N(s.queries,h)}catch(e){console.error("Error fetching queries:",e),c(e instanceof Error?e.message:"Failed to load query history")}finally{o(!1)}},y=()=>{N(e,h)},N=(e,s)=>{"all"===s?d(e):d(e.filter(e=>e.query_type===s))},v=e=>{if(0===e.length)return void j(null);let s={"AI Prediction - Player Prop":0,"AI Prediction - Game Outcome":0,"Player Stats":0,"Player Comparison":0};e.forEach(e=>{s[e.query_type]=(s[e.query_type]||0)+1});let t=Object.entries(s).reduce((e,s)=>s[1]>e[1]?s:e)[0],r=e[0]?.created_at;j({totalQueries:e.length,mostRecentDate:r,mostCommonType:t,queryTypeCounts:s})},P=e=>{let s=new Date(e),t=new Date,r=t.getTime()-s.getTime(),l=Math.floor(r/6e4),a=Math.floor(r/36e5),d=Math.floor(r/864e5);return l<1?"Just now":l<60?`${l} min${l>1?"s":""} ago`:a<24?`${a} hour${a>1?"s":""} ago`:d<7?`${d} day${d>1?"s":""} ago`:s.toLocaleDateString("en-US",{month:"short",day:"numeric",year:s.getFullYear()!==t.getFullYear()?"numeric":void 0})},w=e=>{switch(e){case"AI Prediction - Player Prop":return"ðŸŽ¯";case"AI Prediction - Game Outcome":return"ðŸ†";case"Player Stats":return"ðŸ“Š";case"Player Comparison":return"âš–ï¸"}};return n?(0,s.jsx)("div",{className:"flex items-center justify-center min-h-[60vh]",children:(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)("div",{className:"animate-spin rounded-full h-16 w-16 border-b-4 border-blue-600 mx-auto mb-4"}),(0,s.jsx)("p",{className:"text-muted-foreground",children:"Loading your query history..."})]})}):(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h1",{className:"text-2xl font-bold text-foreground",children:"Query History"}),(0,s.jsx)("p",{className:"text-muted-foreground mt-1",children:"View all your past predictions, searches, and comparisons"})]}),b&&(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,s.jsx)("div",{className:"bg-card/50 backdrop-blur-sm rounded-xl shadow-md border border-border/50 p-6",children:(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)("div",{className:"w-12 h-12 bg-primary/100 rounded-lg flex items-center justify-center",children:(0,s.jsx)("span",{className:"text-2xl",children:"ðŸ“ˆ"})}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-sm text-muted-foreground",children:"Total Queries"}),(0,s.jsx)("p",{className:"text-2xl font-bold text-foreground",children:b.totalQueries})]})]})}),(0,s.jsx)("div",{className:"bg-card/50 backdrop-blur-sm rounded-xl shadow-md border border-border/50 p-6",children:(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)("div",{className:"w-12 h-12 bg-purple-100 rounded-lg flex items-center justify-center",children:(0,s.jsx)("span",{className:"text-2xl",children:"ðŸ•"})}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-sm text-muted-foreground",children:"Most Recent"}),(0,s.jsx)("p",{className:"text-lg font-semibold text-foreground",children:P(b.mostRecentDate)})]})]})}),(0,s.jsx)("div",{className:"bg-card/50 backdrop-blur-sm rounded-xl shadow-md border border-border/50 p-6",children:(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)("div",{className:"w-12 h-12 bg-green-100 rounded-lg flex items-center justify-center",children:(0,s.jsx)("span",{className:"text-2xl",children:w(b.mostCommonType)})}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-sm text-muted-foreground",children:"Most Common"}),(0,s.jsx)("p",{className:"text-sm font-semibold text-foreground",children:"AI Prediction - Player Prop"===b.mostCommonType?"Player Props":"AI Prediction - Game Outcome"===b.mostCommonType?"Game Predictions":"Player Comparison"===b.mostCommonType?"Comparisons":"Player Stats"})]})]})})]}),(0,s.jsx)("div",{className:"bg-card/50 backdrop-blur-sm rounded-xl shadow-md border border-border/50 p-4",children:(0,s.jsx)("div",{className:"flex flex-wrap gap-2",children:[{value:"all",label:"All"},{value:"AI Prediction - Player Prop",label:"Player Props"},{value:"AI Prediction - Game Outcome",label:"Game Predictions"},{value:"Player Stats",label:"Player Stats"},{value:"Player Comparison",label:"Comparisons"}].map(e=>(0,s.jsxs)("button",{onClick:()=>g(e.value),className:`px-4 py-2 rounded-lg font-medium transition-colors ${h===e.value?"bg-blue-600 text-white":"bg-secondary text-muted-foreground hover:bg-secondary/300"}`,children:[e.label,"all"!==e.value&&b&&(0,s.jsxs)("span",{className:"ml-2 text-xs opacity-75",children:["(",b.queryTypeCounts[e.value]||0,")"]})]},e.value))})}),i&&(0,s.jsxs)("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:[(0,s.jsxs)("p",{className:"text-red-800",children:["âš ï¸ ",i]}),(0,s.jsx)("button",{onClick:f,className:"mt-2 text-sm text-red-600 hover:text-red-700 font-medium underline",children:"Try again"})]}),i||0!==a.length?(0,s.jsx)("div",{className:"grid grid-cols-1 gap-4",children:a.map(e=>(0,s.jsx)("div",{className:"bg-card/50 backdrop-blur-sm rounded-xl shadow-md border border-border/50 hover:shadow-lg transition-shadow p-5 border-l-4 border-blue-500",children:(0,s.jsxs)("div",{className:"flex items-start justify-between gap-4",children:[(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsxs)("span",{className:`inline-block px-3 py-1 rounded-full text-xs font-semibold border ${(e=>{switch(e){case"AI Prediction - Player Prop":return"bg-primary/100 text-blue-800 border-blue-200";case"AI Prediction - Game Outcome":return"bg-purple-100 text-purple-800 border-purple-200";case"Player Stats":return"bg-green-100 text-foreground border-border/50";case"Player Comparison":return"bg-orange-100 text-orange-800 border-orange-200"}})(e.query_type)} mb-3`,children:[w(e.query_type)," ",e.query_type]}),(0,s.jsx)("h3",{className:"text-lg font-semibold text-foreground mb-2",children:(e=>{switch(e.query_type){case"AI Prediction - Player Prop":let s=e.details;return`${s.playerName} - ${s.overUnder} ${s.threshold} ${s.propType}`;case"AI Prediction - Game Outcome":let t=e.details;return`${t.team1} vs ${t.team2}`;case"Player Stats":let r=e.details;return`${r.playerName} (${r.team})`;case"Player Comparison":let l=e.details;return`${l.player1.name} vs ${l.player2.name}`;default:return"Unknown query"}})(e)}),(0,s.jsx)("p",{className:"text-sm text-muted-foreground",children:P(e.created_at)})]}),(0,s.jsx)("button",{onClick:()=>{x(e),p(!0)},className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors font-medium whitespace-nowrap",children:"View Details"})]})},e.id))}):(0,s.jsxs)("div",{className:"bg-card/50 backdrop-blur-sm rounded-xl shadow-md border border-border/50 p-12 text-center",children:[(0,s.jsx)("div",{className:"w-20 h-20 bg-secondary rounded-full flex items-center justify-center mx-auto mb-4",children:(0,s.jsx)("span",{className:"text-4xl",children:"ðŸ“‹"})}),(0,s.jsx)("h3",{className:"text-xl font-semibold text-foreground mb-2",children:"No queries yet"}),(0,s.jsx)("p",{className:"text-muted-foreground mb-6",children:"Start using AI Predictions, Player Stats, or Player Comparison to see your history here"})]}),(0,s.jsx)(r,{query:m,isOpen:u,onClose:()=>{p(!1),x(null)}})]})}e.s(["default",()=>l],77088)}]);