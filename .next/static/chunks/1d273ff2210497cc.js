(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,24782,e=>{"use strict";var t=e.i(43476),s=e.i(71645);let r=[{value:"points",label:"Points"},{value:"rebounds",label:"Rebounds"},{value:"assists",label:"Assists"},{value:"steals",label:"Steals"},{value:"blocks",label:"Blocks"},{value:"minutes",label:"Minutes"}];var l=e.i(59512),a=e.i(33638),d=e.i(89970);function n(){let[e,r]=(0,s.useState)("player");return(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h1",{className:"text-2xl font-bold text-foreground",children:"AI Predictions"}),(0,t.jsx)("p",{className:"text-muted-foreground mt-1",children:"Data-driven predictions powered by NBA statistics and AI"})]}),(0,t.jsx)(d.default,{}),(0,t.jsxs)("div",{className:"bg-card/50 backdrop-blur-sm rounded-xl shadow-md border border-border/50 p-2 inline-flex",children:[(0,t.jsx)("button",{onClick:()=>r("player"),className:`px-6 py-2 rounded-md font-medium transition-colors ${"player"===e?"bg-blue-600 text-white":"text-muted-foreground hover:text-foreground"}`,children:"ðŸ€ Player Props"}),(0,t.jsx)("button",{onClick:()=>r("game"),className:`px-6 py-2 rounded-md font-medium transition-colors ${"game"===e?"bg-purple-600 text-white":"text-muted-foreground hover:text-foreground"}`,children:"ðŸ† Game Outcomes"})]}),"player"===e?(0,t.jsx)(o,{}):(0,t.jsx)(i,{})]})}function o(){let[e,d]=(0,s.useState)(""),[n,o]=(0,s.useState)([]),[i,c]=(0,s.useState)(!1),[m,u]=(0,s.useState)(null),[x,p]=(0,s.useState)(null),[b,g]=(0,s.useState)("points"),[h,f]=(0,s.useState)(""),[j,N]=(0,s.useState)("over"),[v,y]=(0,s.useState)(null),[w,S]=(0,s.useState)(null),[P,C]=(0,s.useState)(!1),[_,k]=(0,s.useState)(null),[F,E]=(0,s.useState)(!1),[L,A]=(0,s.useState)(!1),[$,T]=(0,s.useState)(null),I=(0,s.useRef)(null),G=(0,s.useRef)(null);(0,s.useEffect)(()=>{if(G.current&&clearTimeout(G.current),e.trim().length<2){o([]),T(null),A(!1);return}return A(!0),T(null),G.current=setTimeout(async()=>{try{let t=await fetch(`/api/player-search?query=${encodeURIComponent(e)}`),s=await t.json();if(!t.ok)throw Error(s.error||"Failed to search players");s.success&&s.data?(o(s.data.slice(0,8)),c(!0),T(null)):(o([]),T("No players found"))}catch(e){console.error("Player search error:",e),o([]),T(e instanceof Error?e.message:"Error searching players")}finally{A(!1)}},300),()=>{G.current&&clearTimeout(G.current)}},[e]),(0,s.useEffect)(()=>{let e=e=>{I.current&&!I.current.contains(e.target)&&c(!1)};return document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)},[]);let U=async e=>{u(e),d(e.full_name),c(!1),o([]),S(null),k(null),E(!0);try{let t=await fetch(`/api/player-season-stats?player_id=${e.id}&season=2024-25`),s=await t.json();s.success?p(s):k(s.error||"Failed to fetch player stats")}catch(e){k("Error loading player stats")}finally{E(!1)}},V=e=>{if(y(null),!e||""===e.trim())return y("Please enter a threshold value"),!1;let t=parseFloat(e);return isNaN(t)?(y("Please enter a valid number"),!1):t<0?(y("Value cannot be negative"),!1):"points"===b&&t>100?(y("Points value seems too high"),!1):("rebounds"===b||"assists"===b)&&t>50||("steals"===b||"blocks"===b)&&t>20?(y(`${b} value seems too high`),!1):"minutes"!==b||!(t>48)||(y("Minutes cannot exceed 48"),!1)},O=async()=>{if(m&&x&&V(h)){C(!0),k(null);try{let e=await fetch("/api/ai-predict-player",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({playerName:m.full_name,playerStats:x,propType:b,threshold:parseFloat(h),overUnder:j})}),t=await e.json();t.success?(S(t),(0,l.logQuery)({query_type:"AI Prediction - Player Prop",details:{timestamp:new Date().toISOString(),playerName:m.full_name,playerId:m.id,team:m.team_abbreviation||void 0,propType:b,threshold:parseFloat(h),overUnder:j,prediction:t.prediction,confidence:t.confidence,projectedValue:t.projectedValue,reasoning:t.reasoning,statsUsed:t.statsUsed}})):k(t.error||"Failed to generate prediction")}catch(e){k("Error generating prediction")}finally{C(!1)}}},B=e=>e.split(" ").map(e=>e[0]).join("").toUpperCase().slice(0,2);return(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)("div",{className:"bg-card/50 backdrop-blur-sm rounded-xl shadow-md border border-border/50 p-6",children:[(0,t.jsx)("h2",{className:"text-lg font-semibold text-foreground mb-4",children:"Select Player"}),(0,t.jsxs)("div",{ref:I,className:"relative",children:[(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)("input",{type:"text",value:e,onChange:e=>d(e.target.value),onFocus:()=>n.length>0&&c(!0),placeholder:"Search for a player...",className:"w-full px-4 py-3 border border-border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent pr-10"}),L&&(0,t.jsx)("div",{className:"absolute right-3 top-1/2 transform -translate-y-1/2",children:(0,t.jsx)("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-blue-600"})})]}),$&&e.trim().length>=2&&(0,t.jsx)("div",{className:"absolute z-10 w-full mt-2 bg-destructive/10 border border-destructive/30 rounded-lg shadow-lg p-3",children:(0,t.jsx)("p",{className:"text-sm text-destructive",children:$})}),i&&n.length>0&&!$&&(0,t.jsx)("div",{className:"absolute z-10 w-full mt-2 bg-card/95 backdrop-blur-md border border-border/50 rounded-lg shadow-lg max-h-80 overflow-y-auto",children:n.map(e=>(0,t.jsxs)("button",{onClick:()=>U(e),className:"w-full px-4 py-3 text-left hover:bg-primary/10 transition-colors flex items-center gap-3 border-b border-border/30 last:border-b-0",children:[(0,t.jsx)("img",{src:`https://cdn.nba.com/headshots/nba/latest/260x190/${e.id}.png`,alt:e.full_name,className:"w-12 h-12 rounded-full object-cover",onError:t=>{let s=t.target;s.style.display="none";let r=s.parentElement;if(r){let t=document.createElement("div");t.className="w-12 h-12 rounded-full bg-gradient-to-br from-blue-500 to-blue-600 flex items-center justify-center text-white font-bold text-sm",t.textContent=B(e.full_name),r.insertBefore(t,s)}}}),(0,t.jsxs)("div",{className:"flex-1",children:[(0,t.jsx)("p",{className:"font-medium text-foreground",children:e.full_name}),(0,t.jsxs)("p",{className:"text-sm text-muted-foreground",children:[e.team_abbreviation||"NBA",e.is_active?" â€¢ Active":" â€¢ Inactive"]})]})]},e.id))})]})]}),m&&(0,t.jsxs)("div",{className:"bg-card/50 backdrop-blur-sm rounded-xl shadow-md border border-border/50 p-6",children:[(0,t.jsxs)("div",{className:"flex items-center gap-4 mb-6",children:[(0,t.jsx)("img",{src:`https://cdn.nba.com/headshots/nba/latest/260x190/${m.id}.png`,alt:m.full_name,className:"w-20 h-20 rounded-lg object-cover border-2 border-blue-200",onError:e=>{let t=e.target;t.style.display="none";let s=t.parentElement;if(s){let e=document.createElement("div");e.className="w-20 h-20 rounded-lg bg-gradient-to-br from-blue-500 to-blue-600 flex items-center justify-center text-white font-bold text-xl border-2 border-blue-200",e.textContent=B(m.full_name),s.insertBefore(e,t)}}}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h3",{className:"text-xl font-bold text-foreground",children:m.full_name}),(0,t.jsx)("p",{className:"text-muted-foreground",children:m.team_abbreviation||"NBA"})]})]}),F?(0,t.jsx)("div",{className:"flex items-center justify-center py-12",children:(0,t.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}):x?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("div",{className:"mb-6",children:[(0,t.jsx)("h4",{className:"font-semibold text-foreground mb-3",children:"2024-25 Season Averages"}),(0,t.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-5 gap-4",children:[(0,t.jsxs)("div",{className:"bg-primary/10 rounded-lg p-3",children:[(0,t.jsx)("p",{className:"text-sm text-muted-foreground",children:"Points"}),(0,t.jsx)("p",{className:"text-2xl font-bold text-blue-600",children:x.seasonAverage.points.toFixed(1)})]}),(0,t.jsxs)("div",{className:"bg-green-500/10 rounded-lg p-3",children:[(0,t.jsx)("p",{className:"text-sm text-muted-foreground",children:"Rebounds"}),(0,t.jsx)("p",{className:"text-2xl font-bold text-green-600",children:x.seasonAverage.rebounds.toFixed(1)})]}),(0,t.jsxs)("div",{className:"bg-purple-500/10 rounded-lg p-3",children:[(0,t.jsx)("p",{className:"text-sm text-muted-foreground",children:"Assists"}),(0,t.jsx)("p",{className:"text-2xl font-bold text-purple-600",children:x.seasonAverage.assists.toFixed(1)})]}),(0,t.jsxs)("div",{className:"bg-orange-500/10 rounded-lg p-3",children:[(0,t.jsx)("p",{className:"text-sm text-muted-foreground",children:"Steals"}),(0,t.jsx)("p",{className:"text-2xl font-bold text-orange-600",children:x.seasonAverage.steals.toFixed(1)})]}),(0,t.jsxs)("div",{className:"bg-red-500/10 rounded-lg p-3",children:[(0,t.jsx)("p",{className:"text-sm text-muted-foreground",children:"Blocks"}),(0,t.jsx)("p",{className:"text-2xl font-bold text-red-600",children:x.seasonAverage.blocks.toFixed(1)})]})]})]}),(0,t.jsxs)("div",{className:"mb-6",children:[(0,t.jsx)("h4",{className:"font-semibold text-foreground mb-3",children:"Last 10 Games"}),(0,t.jsx)("div",{className:"overflow-x-auto",children:(0,t.jsxs)("table",{className:"w-full text-sm",children:[(0,t.jsx)("thead",{className:"bg-secondary/30",children:(0,t.jsxs)("tr",{children:[(0,t.jsx)("th",{className:"px-3 py-2 text-left text-xs font-medium text-muted-foreground uppercase",children:"Date"}),(0,t.jsx)("th",{className:"px-3 py-2 text-left text-xs font-medium text-muted-foreground uppercase",children:"Opp"}),(0,t.jsx)("th",{className:"px-3 py-2 text-center text-xs font-medium text-muted-foreground uppercase",children:"PTS"}),(0,t.jsx)("th",{className:"px-3 py-2 text-center text-xs font-medium text-muted-foreground uppercase",children:"REB"}),(0,t.jsx)("th",{className:"px-3 py-2 text-center text-xs font-medium text-muted-foreground uppercase",children:"AST"}),(0,t.jsx)("th",{className:"px-3 py-2 text-center text-xs font-medium text-muted-foreground uppercase",children:"STL"}),(0,t.jsx)("th",{className:"px-3 py-2 text-center text-xs font-medium text-muted-foreground uppercase",children:"BLK"}),(0,t.jsx)("th",{className:"px-3 py-2 text-center text-xs font-medium text-muted-foreground uppercase",children:"MIN"})]})}),(0,t.jsx)("tbody",{className:"divide-y divide-gray-200",children:x.recentGames.slice(0,10).map((e,s)=>(0,t.jsxs)("tr",{className:"hover:bg-secondary/30",children:[(0,t.jsx)("td",{className:"px-3 py-2 text-foreground",children:e.date}),(0,t.jsx)("td",{className:"px-3 py-2 text-foreground",children:e.opponent}),(0,t.jsx)("td",{className:"px-3 py-2 text-center font-medium text-foreground",children:e.points}),(0,t.jsx)("td",{className:"px-3 py-2 text-center text-foreground",children:e.rebounds}),(0,t.jsx)("td",{className:"px-3 py-2 text-center text-foreground",children:e.assists}),(0,t.jsx)("td",{className:"px-3 py-2 text-center text-foreground",children:e.steals}),(0,t.jsx)("td",{className:"px-3 py-2 text-center text-foreground",children:e.blocks}),(0,t.jsx)("td",{className:"px-3 py-2 text-center text-foreground",children:e.minutes})]},s))})]})})]}),(0,t.jsxs)("div",{className:"mb-6",children:[(0,t.jsx)("h4",{className:"font-semibold text-foreground mb-3",children:"Select Prop Type"}),(0,t.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-6 gap-3",children:r.map(e=>(0,t.jsx)("button",{onClick:()=>{g(e.value),y(null),S(null)},className:`px-4 py-3 rounded-lg font-medium transition-colors ${b===e.value?"bg-blue-600 text-white":"bg-secondary text-muted-foreground hover:bg-secondary"}`,children:e.label},e.value))})]}),(0,t.jsxs)("div",{className:"mb-6",children:[(0,t.jsx)("h4",{className:"font-semibold text-foreground mb-3",children:"Set Threshold"}),(0,t.jsxs)("div",{className:"flex flex-col md:flex-row gap-4",children:[(0,t.jsxs)("div",{className:"flex-shrink-0",children:[(0,t.jsx)("label",{className:"block text-sm text-muted-foreground mb-2",children:"Direction"}),(0,t.jsxs)("div",{className:"inline-flex rounded-lg border border-border overflow-hidden",children:[(0,t.jsx)("button",{type:"button",onClick:()=>{N("over"),S(null)},className:`px-6 py-3 font-medium transition-colors ${"over"===j?"bg-green-600 text-white":"bg-white text-muted-foreground hover:bg-secondary/30"}`,children:"Over"}),(0,t.jsx)("button",{type:"button",onClick:()=>{N("under"),S(null)},className:`px-6 py-3 font-medium transition-colors border-l border-border ${"under"===j?"bg-red-600 text-white":"bg-white text-muted-foreground hover:bg-secondary/30"}`,children:"Under"})]})]}),(0,t.jsxs)("div",{className:"flex-1",children:[(0,t.jsxs)("label",{className:"block text-sm text-muted-foreground mb-2",children:[r.find(e=>e.value===b)?.label," Value"]}),(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)("input",{type:"number",value:h,onChange:e=>{f(e.target.value),y(null),S(null)},onBlur:()=>{h&&V(h)},placeholder:`Enter ${b} threshold (e.g., ${"points"===b?"25.5":"rebounds"===b?"10.5":"assists"===b?"8.5":"minutes"===b?"35":"2.5"})`,step:"0.5",min:"0",className:`w-full px-4 py-3 border rounded-lg focus:ring-2 focus:border-transparent ${v?"border-red-300 focus:ring-red-500":"border-border focus:ring-blue-500"}`}),h&&(0,t.jsx)("div",{className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-sm font-medium text-muted-foreground",children:r.find(e=>e.value===b)?.label})]}),v&&(0,t.jsxs)("p",{className:"mt-2 text-sm text-red-600 flex items-center gap-1",children:[(0,t.jsx)("span",{children:"âš ï¸"}),v]}),h&&!v&&(0,t.jsxs)("p",{className:"mt-2 text-sm text-muted-foreground",children:["Predicting: ",(0,t.jsx)("span",{className:"font-semibold",children:m.full_name})," will score"," ",(0,t.jsxs)("span",{className:`font-bold ${"over"===j?"text-green-600":"text-red-600"}`,children:[j," ",h]})," ",b]})]})]})]}),(0,t.jsx)("button",{onClick:O,disabled:P||!h,className:"w-full px-6 py-4 bg-gradient-to-r from-blue-600 to-blue-700 text-white font-semibold rounded-lg hover:from-blue-700 hover:to-blue-800 transition-all disabled:opacity-50 disabled:cursor-not-allowed",children:P?(0,t.jsxs)("span",{className:"flex items-center justify-center gap-2",children:[(0,t.jsx)("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white"}),"Generating AI Prediction..."]}):h?`ðŸ¤– Generate AI Prediction: ${j.charAt(0).toUpperCase()+j.slice(1)} ${h}`:"âš ï¸ Enter Threshold Value to Continue"})]}):null]}),_&&(0,t.jsx)("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:(0,t.jsxs)("p",{className:"text-red-800",children:["âš ï¸ ",_]})}),w&&(0,t.jsxs)("div",{className:"bg-gradient-to-br from-blue-50 to-purple-50 rounded-lg shadow-lg p-6 border-2 border-blue-200",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 mb-4",children:[(0,t.jsx)("span",{className:"text-3xl",children:"ðŸŽ¯"}),(0,t.jsx)("h3",{className:"text-2xl font-bold text-foreground",children:"AI Prediction"})]}),(0,t.jsxs)("div",{className:"space-y-4",children:[w.threshold&&w.overUnder&&(0,t.jsxs)("div",{className:"bg-white rounded-lg p-4 border-l-4 ${   prediction.overUnder === 'over' ? 'border-green-500' : 'border-red-500'   }",children:[(0,t.jsx)("p",{className:"text-sm text-muted-foreground mb-1",children:"Prop Bet"}),(0,t.jsxs)("p",{className:"text-lg font-bold text-foreground",children:[w.playerName," - ",r.find(e=>e.value===w.propType)?.label]}),(0,t.jsxs)("p",{className:"text-2xl font-bold ${   prediction.overUnder === 'over' ? 'text-green-600' : 'text-red-600'   } mt-1",children:[w.overUnder.toUpperCase()," ",w.threshold]})]}),(0,t.jsxs)("div",{className:"bg-white rounded-lg p-4",children:[(0,t.jsx)("p",{className:"text-sm text-muted-foreground mb-1",children:"AI Recommendation"}),(0,t.jsx)("p",{className:"text-2xl font-bold text-blue-600",children:w.prediction}),w.projectedValue&&(0,t.jsxs)("p",{className:"text-sm text-muted-foreground mt-1",children:["Projected Value: ",w.projectedValue.toFixed(1)," ",w.propType]})]}),(0,t.jsxs)("div",{className:"bg-white rounded-lg p-4",children:[(0,t.jsx)("p",{className:"text-sm text-muted-foreground mb-2",children:"Confidence Level"}),(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)("div",{className:"flex-1 bg-secondary rounded-full h-3",children:(0,t.jsx)("div",{className:`h-3 rounded-full ${"High"===w.confidence?"bg-green-600":"Medium"===w.confidence?"bg-yellow-600":"bg-orange-600"}`,style:{width:"High"===w.confidence?"90%":"Medium"===w.confidence?"65%":"40%"}})}),(0,t.jsx)("span",{className:`px-3 py-1 rounded-full text-sm font-semibold ${"High"===w.confidence?"bg-green-100 text-green-800":"Medium"===w.confidence?"bg-yellow-100 text-yellow-800":"bg-orange-100 text-orange-800"}`,children:w.confidence})]})]}),(0,t.jsxs)("div",{className:"bg-white rounded-lg p-4",children:[(0,t.jsx)("p",{className:"text-sm text-muted-foreground mb-2",children:"Analysis"}),(0,t.jsx)("p",{className:"text-foreground",children:w.reasoning})]}),w.statsUsed&&w.statsUsed.length>0&&(0,t.jsxs)("div",{className:"bg-white rounded-lg p-4",children:[(0,t.jsx)("p",{className:"text-sm text-muted-foreground mb-2",children:"Key Statistics"}),(0,t.jsx)("ul",{className:"space-y-1",children:w.statsUsed.map((e,s)=>(0,t.jsxs)("li",{className:"text-sm text-muted-foreground",children:["â€¢ ",e]},s))})]})]}),(0,t.jsx)("div",{className:"mt-6 border-t border-border/50 pt-4",children:(0,t.jsx)(a.default,{context:{type:"player-prop",originalPrediction:w,stats:x}})})]})]})}function i(){let[e,r]=(0,s.useState)("upcoming"),[d,n]=(0,s.useState)(""),[o,i]=(0,s.useState)([]),[c,m]=(0,s.useState)(!1),[u,x]=(0,s.useState)(!1),[p,b]=(0,s.useState)(null),[g,h]=(0,s.useState)(""),[f,j]=(0,s.useState)(""),[N,v]=(0,s.useState)(""),[y,w]=(0,s.useState)([]),[S,P]=(0,s.useState)([]),[C,_]=(0,s.useState)([]),[k,F]=(0,s.useState)(!1),[E,L]=(0,s.useState)(!1),[A,$]=(0,s.useState)(null),[T,I]=(0,s.useState)(null),[G,U]=(0,s.useState)({}),[V,O]=(0,s.useState)(null),[B,R]=(0,s.useState)(!1),[D,M]=(0,s.useState)(null),[z,K]=(0,s.useState)(!1),H=(0,s.useRef)(null),q=(0,s.useRef)(null),W=(0,s.useRef)(null),J=(0,s.useRef)(null);(0,s.useEffect)(()=>{if(J.current&&clearTimeout(J.current),d.trim().length<2){i([]),x(!1);return}return x(!0),J.current=setTimeout(async()=>{try{let e=await fetch(`/api/google-upcoming-games?team=${encodeURIComponent(d)}`),t=await e.json();t.success&&t.games&&t.games.length>0?(i(t.games),m(!0),h(t.source||"google")):i([])}catch(e){console.error("Error fetching upcoming games from Google:",e),i([])}finally{x(!1)}},300),()=>{J.current&&clearTimeout(J.current)}},[d]),(0,s.useEffect)(()=>{(async()=>{K(!0);try{let[e,t]=await Promise.all([fetch("/api/teams-list"),fetch("/api/team-stats?season=2024-25")]),s=await e.json(),r=await t.json();if(s.success&&w(s.teams),r.success){let e={};r.teams.forEach(t=>{e[t.teamId]=t}),U(e)}}catch(e){console.error("Error loading teams:",e)}finally{K(!1)}})()},[]),(0,s.useEffect)(()=>{f.trim().length<2?P([]):(P(y.filter(e=>e.full_name.toLowerCase().includes(f.toLowerCase())||e.abbreviation.toLowerCase().includes(f.toLowerCase())||e.city.toLowerCase().includes(f.toLowerCase())).slice(0,8)),F(!0))},[f,y]),(0,s.useEffect)(()=>{N.trim().length<2?_([]):(_(y.filter(e=>e.full_name.toLowerCase().includes(N.toLowerCase())||e.abbreviation.toLowerCase().includes(N.toLowerCase())||e.city.toLowerCase().includes(N.toLowerCase())).slice(0,8)),L(!0))},[N,y]),(0,s.useEffect)(()=>{let e=e=>{H.current&&!H.current.contains(e.target)&&m(!1),q.current&&!q.current.contains(e.target)&&F(!1),W.current&&!W.current.contains(e.target)&&L(!1)};return document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)},[]);let Q=async(e,t)=>{let s=y.find(t=>t.full_name.toLowerCase().includes(e.full_name.toLowerCase())||e.full_name.toLowerCase().includes(t.full_name.toLowerCase())),r=y.find(e=>e.full_name.toLowerCase().includes(t.full_name.toLowerCase())||t.full_name.toLowerCase().includes(e.full_name.toLowerCase()));s&&$(s),r&&I(r)},X=async()=>{if(!A||!T)return;let e=G[A.id],t=G[T.id];if(!e||!t)return void M("Team statistics not available");R(!0),M(null);try{let s=p?{status:p.status,team1Score:p.team1.score,team2Score:p.team2.score,venue:p.venue}:void 0,r=await fetch("/api/ai-predict-game",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({team1:A.full_name,team2:T.full_name,team1Stats:e,team2Stats:t,gameDate:p?`${p.date} ${p.time}`:void 0,liveScore:s})}),a=await r.json();a.success?(O(a),(0,l.logQuery)({query_type:"AI Prediction - Game Outcome",details:{timestamp:new Date().toISOString(),team1:A.full_name,team2:T.full_name,winner:a.winner,scorePrediction:a.scorePrediction,winProbability:a.winProbability,confidence:a.confidence,reasoning:a.reasoning,keyFactors:a.keyFactors,gameDate:p?`${p.date} ${p.time}`:void 0,liveScore:s}})):M(a.error||"Failed to generate prediction")}catch(e){M("Error generating prediction")}finally{R(!1)}};return(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)("div",{className:"bg-card/50 backdrop-blur-sm rounded-xl shadow-md border border-border/50 p-6",children:[(0,t.jsx)("h2",{className:"text-lg font-semibold text-foreground mb-4",children:"Select Input Method"}),(0,t.jsxs)("div",{className:"inline-flex rounded-lg border border-border overflow-hidden",children:[(0,t.jsx)("button",{type:"button",onClick:()=>{r("upcoming"),O(null),M(null)},className:`px-6 py-3 font-medium transition-colors ${"upcoming"===e?"bg-purple-600 text-white":"bg-white text-muted-foreground hover:bg-secondary/30"}`,children:"ðŸ“… Search Upcoming Games"}),(0,t.jsx)("button",{type:"button",onClick:()=>{r("manual"),O(null),M(null)},className:`px-6 py-3 font-medium transition-colors border-l border-border ${"manual"===e?"bg-green-600 text-white":"bg-card text-muted-foreground hover:bg-secondary/30"}`,children:"âœï¸ Manual Team Entry"})]})]}),"upcoming"===e&&(0,t.jsxs)("div",{className:"bg-card/50 backdrop-blur-sm rounded-xl shadow-md border border-border/50 p-6",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,t.jsx)("h2",{className:"text-lg font-semibold text-purple-900",children:"ðŸ€ Find Upcoming Game"}),g&&(0,t.jsxs)("span",{className:"text-xs px-2 py-1 bg-secondary text-muted-foreground rounded",children:["Source: ","google_serpapi"===g?"Google API":"sample_data"===g?"Demo":g]})]}),(0,t.jsxs)("div",{ref:H,className:"relative",children:[(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)("input",{type:"text",value:d,onChange:e=>n(e.target.value),onFocus:()=>o.length>0&&m(!0),placeholder:"Search by team name (e.g., Lakers, Celtics)...",className:"w-full px-4 py-3 border border-purple-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent pr-10"}),u&&(0,t.jsx)("div",{className:"absolute right-3 top-1/2 transform -translate-y-1/2",children:(0,t.jsx)("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-purple-600"})})]}),c&&o.length>0&&(0,t.jsx)("div",{className:"absolute z-10 w-full mt-2 bg-card/95 backdrop-blur-md border border-border/50 rounded-lg shadow-lg max-h-96 overflow-y-auto",children:o.map(e=>(0,t.jsxs)("button",{onClick:()=>{let t,s;return b(e),n(`${e.team1.name} vs ${e.team2.name}`),m(!1),t={id:0,full_name:e.team1.name,abbreviation:e.team1.name.split(" ").pop()||e.team1.name,nickname:e.team1.name,city:e.team1.name,logo_url:e.team1.logo_url},s={id:0,full_name:e.team2.name,abbreviation:e.team2.name.split(" ").pop()||e.team2.name,nickname:e.team2.name,city:e.team2.name,logo_url:e.team2.logo_url},void($(t),I(s),O(null),M(null),Q(t,s))},className:`w-full px-4 py-4 text-left hover:bg-primary/10 transition-colors border-b border-border/30 last:border-b-0 ${"live"===e.status?"bg-destructive/10":""}`,children:[(0,t.jsxs)("div",{className:"flex items-center gap-4",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 flex-1",children:[(0,t.jsx)("img",{src:e.team1.logo_url,alt:e.team1.name,className:"w-10 h-10 object-contain",onError:e=>{e.target.style.display="none"}}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"font-medium text-foreground",children:e.team1.name}),void 0!==e.team1.score&&(0,t.jsx)("p",{className:"text-lg font-bold text-purple-600",children:e.team1.score})]})]}),(0,t.jsx)("div",{className:"text-center",children:(0,t.jsx)("span",{className:"text-sm font-bold text-muted-foreground",children:"VS"})}),(0,t.jsxs)("div",{className:"flex items-center gap-2 flex-1 justify-end",children:[(0,t.jsxs)("div",{className:"text-right",children:[(0,t.jsx)("p",{className:"font-medium text-foreground",children:e.team2.name}),void 0!==e.team2.score&&(0,t.jsx)("p",{className:"text-lg font-bold text-purple-600",children:e.team2.score})]}),(0,t.jsx)("img",{src:e.team2.logo_url,alt:e.team2.name,className:"w-10 h-10 object-contain",onError:e=>{e.target.style.display="none"}})]})]}),(0,t.jsxs)("div",{className:"mt-2 text-xs text-muted-foreground text-center",children:[e.date," ",e.time&&`â€¢ ${e.time}`,"live"===e.status&&(0,t.jsx)("span",{className:"ml-2 text-red-600 font-bold",children:"â— LIVE"}),"final"===e.status&&(0,t.jsx)("span",{className:"ml-2 text-muted-foreground font-bold",children:"FINAL"})]})]},e.game_id))}),d.trim().length>=2&&0===o.length&&!u&&(0,t.jsx)("div",{className:"absolute z-10 w-full mt-2 bg-card/95 backdrop-blur-md border border-border/50 rounded-lg shadow-lg p-4",children:(0,t.jsx)("p",{className:"text-sm text-muted-foreground",children:"No upcoming games found. Try searching for a different team."})})]})]}),"manual"===e&&(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,t.jsxs)("div",{className:"bg-card/50 backdrop-blur-sm rounded-xl shadow-md border border-border/50 p-6",children:[(0,t.jsx)("h2",{className:"text-lg font-semibold text-purple-900 mb-4",children:"Team 1"}),(0,t.jsxs)("div",{ref:q,className:"relative",children:[(0,t.jsx)("input",{type:"text",value:f,onChange:e=>j(e.target.value),onFocus:()=>S.length>0&&F(!0),placeholder:"Search for a team...",className:"w-full px-4 py-3 border border-purple-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent"}),k&&S.length>0&&(0,t.jsx)("div",{className:"absolute z-10 w-full mt-2 bg-card/95 backdrop-blur-md border border-border/50 rounded-lg shadow-lg max-h-80 overflow-y-auto",children:S.map(e=>(0,t.jsxs)("button",{onClick:()=>{$(e),j(e.full_name),F(!1),O(null),M(null)},className:"w-full px-4 py-3 text-left hover:bg-primary/10 transition-colors border-b border-border/30 last:border-b-0",children:[(0,t.jsx)("p",{className:"font-medium text-foreground",children:e.full_name}),(0,t.jsx)("p",{className:"text-sm text-muted-foreground",children:e.abbreviation})]},e.id))})]})]}),(0,t.jsxs)("div",{className:"bg-card/50 backdrop-blur-sm rounded-xl shadow-md border border-border/50 p-6",children:[(0,t.jsx)("h2",{className:"text-lg font-semibold text-green-900 mb-4",children:"Team 2"}),(0,t.jsxs)("div",{ref:W,className:"relative",children:[(0,t.jsx)("input",{type:"text",value:N,onChange:e=>v(e.target.value),onFocus:()=>C.length>0&&L(!0),placeholder:"Search for a team...",className:"w-full px-4 py-3 border border-green-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent"}),E&&C.length>0&&(0,t.jsx)("div",{className:"absolute z-10 w-full mt-2 bg-card/95 backdrop-blur-md border border-border/50 rounded-lg shadow-lg max-h-80 overflow-y-auto",children:C.map(e=>(0,t.jsxs)("button",{onClick:()=>{I(e),v(e.full_name),L(!1),O(null),M(null)},className:"w-full px-4 py-3 text-left hover:bg-primary/10 transition-colors border-b border-border/30 last:border-b-0",children:[(0,t.jsx)("p",{className:"font-medium text-foreground",children:e.full_name}),(0,t.jsx)("p",{className:"text-sm text-muted-foreground",children:e.abbreviation})]},e.id))})]})]})]}),p&&"upcoming"===e&&(0,t.jsxs)("div",{className:`bg-card/50 backdrop-blur-sm rounded-xl shadow-md p-6 border ${"live"===p.status?"border-destructive/50":"final"===p.status?"border-border/50":"border-primary/50"}`,children:[(0,t.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,t.jsx)("h2",{className:"text-lg font-semibold text-foreground",children:"ðŸŽ¯ Selected Game"}),"live"===p.status&&(0,t.jsx)("span",{className:"animate-pulse px-3 py-1 bg-red-600 text-white text-sm font-bold rounded",children:"â— LIVE"}),"final"===p.status&&(0,t.jsx)("span",{className:"px-3 py-1 bg-gray-600 text-white text-sm font-bold rounded",children:"FINAL"})]}),(0,t.jsxs)("div",{className:"flex items-center justify-center gap-8",children:[(0,t.jsxs)("div",{className:"text-center flex-1",children:[(0,t.jsx)("img",{src:p.team1.logo_url,alt:p.team1.name,className:"w-24 h-24 mx-auto object-contain mb-2",onError:e=>{e.target.style.display="none"}}),(0,t.jsx)("p",{className:"font-bold text-foreground text-lg",children:p.team1.name}),void 0!==p.team1.score&&(0,t.jsx)("p",{className:"text-3xl font-bold text-purple-600 mt-2",children:p.team1.score})]}),(0,t.jsx)("div",{className:"text-center",children:"live"===p.status?(0,t.jsxs)("div",{children:[(0,t.jsx)("span",{className:"text-2xl font-bold text-red-600",children:"VS"}),(0,t.jsx)("p",{className:"text-xs text-red-600 mt-1 animate-pulse",children:"LIVE NOW"})]}):"final"===p.status?(0,t.jsxs)("div",{children:[(0,t.jsx)("span",{className:"text-2xl font-bold text-muted-foreground",children:"VS"}),(0,t.jsx)("p",{className:"text-xs text-muted-foreground mt-1",children:"FINAL"})]}):(0,t.jsx)("span",{className:"text-3xl font-bold text-purple-600",children:"VS"})}),(0,t.jsxs)("div",{className:"text-center flex-1",children:[(0,t.jsx)("img",{src:p.team2.logo_url,alt:p.team2.name,className:"w-24 h-24 mx-auto object-contain mb-2",onError:e=>{e.target.style.display="none"}}),(0,t.jsx)("p",{className:"font-bold text-foreground text-lg",children:p.team2.name}),void 0!==p.team2.score&&(0,t.jsx)("p",{className:"text-3xl font-bold text-purple-600 mt-2",children:p.team2.score})]})]}),(0,t.jsxs)("div",{className:"mt-6 grid grid-cols-1 md:grid-cols-3 gap-4 text-center",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-xs text-muted-foreground",children:"Date"}),(0,t.jsx)("p",{className:"text-sm font-semibold text-foreground",children:p.date})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-xs text-muted-foreground",children:"Time"}),(0,t.jsx)("p",{className:"text-sm font-semibold text-foreground",children:p.time||"TBD"})]}),p.venue&&(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-xs text-muted-foreground",children:"Venue"}),(0,t.jsx)("p",{className:"text-sm font-semibold text-foreground",children:p.venue})]})]})]}),A&&T&&G[A.id]&&G[T.id]&&(0,t.jsxs)("div",{className:"bg-card/50 backdrop-blur-sm rounded-xl shadow-md border border-border/50 p-6",children:[(0,t.jsx)("h2",{className:"text-lg font-semibold text-foreground mb-4",children:"Team Statistics Comparison"}),(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-6",children:[(0,t.jsxs)("div",{className:"space-y-3",children:[(0,t.jsxs)("div",{className:"text-center mb-4",children:[(0,t.jsx)("h3",{className:"text-xl font-bold text-purple-900",children:A.full_name}),(0,t.jsxs)("p",{className:"text-muted-foreground",children:[G[A.id].wins,"-",G[A.id].losses]})]}),(0,t.jsxs)("div",{className:"bg-purple-500/10 rounded-lg p-3",children:[(0,t.jsx)("p",{className:"text-sm text-muted-foreground",children:"PPG"}),(0,t.jsx)("p",{className:"text-xl font-bold text-purple-600",children:G[A.id].pointsPerGame.toFixed(1)})]}),(0,t.jsxs)("div",{className:"bg-purple-500/10 rounded-lg p-3",children:[(0,t.jsx)("p",{className:"text-sm text-muted-foreground",children:"Opp PPG"}),(0,t.jsx)("p",{className:"text-xl font-bold text-purple-600",children:G[A.id].pointsAllowed.toFixed(1)})]}),(0,t.jsxs)("div",{className:"bg-purple-500/10 rounded-lg p-3",children:[(0,t.jsx)("p",{className:"text-sm text-muted-foreground",children:"FG%"}),(0,t.jsxs)("p",{className:"text-xl font-bold text-purple-600",children:[G[A.id].fieldGoalPct.toFixed(1),"%"]})]}),(0,t.jsxs)("div",{className:"bg-purple-500/10 rounded-lg p-3",children:[(0,t.jsx)("p",{className:"text-sm text-muted-foreground",children:"3P%"}),(0,t.jsxs)("p",{className:"text-xl font-bold text-purple-600",children:[G[A.id].threePointPct.toFixed(1),"%"]})]})]}),(0,t.jsxs)("div",{className:"space-y-3",children:[(0,t.jsxs)("div",{className:"text-center mb-4",children:[(0,t.jsx)("h3",{className:"text-xl font-bold text-green-900",children:T.full_name}),(0,t.jsxs)("p",{className:"text-muted-foreground",children:[G[T.id].wins,"-",G[T.id].losses]})]}),(0,t.jsxs)("div",{className:"bg-green-500/10 rounded-lg p-3",children:[(0,t.jsx)("p",{className:"text-sm text-muted-foreground",children:"PPG"}),(0,t.jsx)("p",{className:"text-xl font-bold text-green-600",children:G[T.id].pointsPerGame.toFixed(1)})]}),(0,t.jsxs)("div",{className:"bg-green-500/10 rounded-lg p-3",children:[(0,t.jsx)("p",{className:"text-sm text-muted-foreground",children:"Opp PPG"}),(0,t.jsx)("p",{className:"text-xl font-bold text-green-600",children:G[T.id].pointsAllowed.toFixed(1)})]}),(0,t.jsxs)("div",{className:"bg-green-500/10 rounded-lg p-3",children:[(0,t.jsx)("p",{className:"text-sm text-muted-foreground",children:"FG%"}),(0,t.jsxs)("p",{className:"text-xl font-bold text-green-600",children:[G[T.id].fieldGoalPct.toFixed(1),"%"]})]}),(0,t.jsxs)("div",{className:"bg-green-500/10 rounded-lg p-3",children:[(0,t.jsx)("p",{className:"text-sm text-muted-foreground",children:"3P%"}),(0,t.jsxs)("p",{className:"text-xl font-bold text-green-600",children:[G[T.id].threePointPct.toFixed(1),"%"]})]})]})]}),(0,t.jsx)("button",{onClick:X,disabled:B,className:"w-full mt-6 px-6 py-4 bg-gradient-to-r from-purple-600 to-green-600 text-white font-semibold rounded-lg hover:from-purple-700 hover:to-green-700 transition-all disabled:opacity-50 disabled:cursor-not-allowed",children:B?(0,t.jsxs)("span",{className:"flex items-center justify-center gap-2",children:[(0,t.jsx)("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white"}),"Generating AI Prediction..."]}):"ðŸ¤– Generate AI Prediction"})]}),D&&(0,t.jsx)("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:(0,t.jsxs)("p",{className:"text-red-800",children:["âš ï¸ ",D]})}),V&&(0,t.jsxs)("div",{className:"bg-gradient-to-br from-purple-50 to-green-50 rounded-lg shadow-lg p-6 border-2 border-purple-200",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 mb-4",children:[(0,t.jsx)("span",{className:"text-3xl",children:"ðŸ†"}),(0,t.jsx)("h3",{className:"text-2xl font-bold text-foreground",children:"AI Prediction"})]}),(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"bg-white rounded-lg p-4",children:[(0,t.jsx)("p",{className:"text-sm text-muted-foreground mb-1",children:"Predicted Winner"}),(0,t.jsx)("p",{className:"text-2xl font-bold text-purple-600",children:V.winner}),V.scorePrediction&&(0,t.jsxs)("p",{className:"text-sm text-muted-foreground mt-1",children:["Score: ",V.scorePrediction]})]}),V.winProbability&&(0,t.jsxs)("div",{className:"bg-white rounded-lg p-4",children:[(0,t.jsx)("p",{className:"text-sm text-muted-foreground mb-2",children:"Win Probability"}),(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)("div",{className:"flex-1 bg-secondary rounded-full h-3",children:(0,t.jsx)("div",{className:"h-3 rounded-full bg-gradient-to-r from-purple-600 to-green-600",style:{width:`${V.winProbability}%`}})}),(0,t.jsxs)("span",{className:"text-lg font-bold text-foreground",children:[V.winProbability,"%"]})]})]}),(0,t.jsxs)("div",{className:"bg-white rounded-lg p-4",children:[(0,t.jsx)("p",{className:"text-sm text-muted-foreground mb-2",children:"Confidence Level"}),(0,t.jsx)("span",{className:`inline-block px-4 py-2 rounded-full text-sm font-semibold ${"High"===V.confidence?"bg-green-100 text-green-800":"Medium"===V.confidence?"bg-yellow-100 text-yellow-800":"bg-orange-100 text-orange-800"}`,children:V.confidence})]}),(0,t.jsxs)("div",{className:"bg-white rounded-lg p-4",children:[(0,t.jsx)("p",{className:"text-sm text-muted-foreground mb-2",children:"Analysis"}),(0,t.jsx)("p",{className:"text-foreground",children:V.reasoning})]}),V.keyFactors&&V.keyFactors.length>0&&(0,t.jsxs)("div",{className:"bg-white rounded-lg p-4",children:[(0,t.jsx)("p",{className:"text-sm text-muted-foreground mb-2",children:"Key Factors"}),(0,t.jsx)("ul",{className:"space-y-1",children:V.keyFactors.map((e,s)=>(0,t.jsxs)("li",{className:"text-sm text-muted-foreground",children:["â€¢ ",e]},s))})]})]}),(0,t.jsx)("div",{className:"mt-6 border-t border-border/50 pt-4",children:(0,t.jsx)(a.default,{context:{type:"game-outcome",originalPrediction:V,stats:{team1:A?G[A.id]:null,team2:T?G[T.id]:null}}})})]})]})}e.s(["default",()=>n],24782)}]);