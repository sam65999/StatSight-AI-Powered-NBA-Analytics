(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,63488,e=>{"use strict";let r=(0,e.i(75254).default)("mail",[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]]);e.s(["Mail",()=>r],63488)},70756,e=>{"use strict";let r=(0,e.i(75254).default)("lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);e.s(["Lock",()=>r],70756)},37727,e=>{"use strict";let r=(0,e.i(75254).default)("x",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);e.s(["X",()=>r],37727)},41507,e=>{"use strict";var r=e.i(43476),t=e.i(71645),s=e.i(18566),a=e.i(53210),d=e.i(63488),l=e.i(70756),o=e.i(84614),n=e.i(75254);let i=(0,n.default)("trash-2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]),c=(0,n.default)("log-out",[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]]),u=(0,n.default)("triangle-alert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]),m=(0,n.default)("check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);var x=e.i(37727);function h(){let[e,n]=(0,t.useState)(null),[h,g]=(0,t.useState)(""),[p,b]=(0,t.useState)(!0),f=(0,s.useRouter)(),[y,v]=(0,t.useState)(""),[j,w]=(0,t.useState)(""),[N,k]=(0,t.useState)(!1),[S,C]=(0,t.useState)(""),[P,M]=(0,t.useState)(""),[O,T]=(0,t.useState)(""),[U,q]=(0,t.useState)(""),[A,z]=(0,t.useState)(""),[D,E]=(0,t.useState)(!1),[L,I]=(0,t.useState)(""),[F,R]=(0,t.useState)(""),[X,H]=(0,t.useState)(""),[J,V]=(0,t.useState)(!1),[B,K]=(0,t.useState)(""),[_,$]=(0,t.useState)(""),[G,Q]=(0,t.useState)(""),[W,Y]=(0,t.useState)(!1),[Z,ee]=(0,t.useState)(!1),[er,et]=(0,t.useState)("");(0,t.useEffect)(()=>{(async()=>{let{data:{user:e}}=await a.supabase.auth.getUser();if(!e)return f.push("/login");n(e);let r=await fetch(`/api/get-profile?userId=${e.id}`),t=await r.json();t.success&&t.profile&&(g(t.profile.username||""),H(t.profile.username||"")),b(!1)})()},[f]);let es=async r=>{r.preventDefault(),k(!0),M(""),C("");try{let r=await fetch("/api/update-email",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({userId:e?.id,newEmail:y,password:j})}),t=await r.json();if(!r.ok)throw Error(t.error||"Failed to update email");C(t.message),v(""),w("")}catch(e){M(e.message)}finally{k(!1)}},ea=async r=>{if(r.preventDefault(),E(!0),R(""),I(""),U!==A){R("Passwords do not match"),E(!1);return}if(U.length<8){R("Password must be at least 8 characters"),E(!1);return}try{let r=await fetch("/api/update-password",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({userId:e?.id,oldPassword:O,newPassword:U})}),t=await r.json();if(!r.ok)throw Error(t.error||"Failed to update password");I(t.message),T(""),q(""),z("")}catch(e){R(e.message)}finally{E(!1)}},ed=async r=>{r.preventDefault(),V(!0),$(""),K("");try{let r=await fetch("/api/update-username",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({userId:e?.id,username:X})}),t=await r.json();if(!r.ok)throw Error(t.error||"Failed to update username");K(t.message),g(X),setTimeout(()=>{window.location.reload()},1500)}catch(e){$(e.message)}finally{V(!1)}},el=async()=>{ee(!0),et("");try{let r=await fetch("/api/delete-user",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({userId:e?.id,password:G})}),t=await r.json();if(!r.ok)throw Error(t.error||"Failed to delete account");await a.supabase.auth.signOut(),f.push("/")}catch(e){et(e.message),ee(!1)}},eo=async()=>{await a.supabase.auth.signOut(),f.push("/login")};return p?(0,r.jsx)("div",{className:"flex items-center justify-center min-h-screen",children:(0,r.jsx)("div",{className:"text-muted-foreground",children:"Loading..."})}):(0,r.jsxs)("div",{className:"max-w-4xl mx-auto space-y-6",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h1",{className:"text-3xl font-bold text-foreground",children:"Account Settings"}),(0,r.jsx)("p",{className:"text-muted-foreground mt-2",children:"Manage your account preferences and security"})]}),(0,r.jsxs)("div",{className:"bg-blue-500/10 border border-blue-500/30 rounded-lg p-4 flex items-start gap-3 animate-in fade-in slide-in-from-top-2 duration-500",children:[(0,r.jsx)("svg",{className:"w-5 h-5 text-blue-500 flex-shrink-0 mt-0.5",fill:"currentColor",viewBox:"0 0 20 20",children:(0,r.jsx)("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z",clipRule:"evenodd"})}),(0,r.jsx)("div",{className:"flex-1",children:(0,r.jsx)("p",{className:"text-sm font-medium text-foreground",children:"Note: Since this is a free project, the AI may be rate limited. If that happens, please try again later."})})]}),(0,r.jsxs)("div",{className:"bg-card/50 backdrop-blur-sm rounded-2xl shadow-lg border border-border/50 p-6 transition-all duration-300 hover:shadow-xl",children:[(0,r.jsxs)("div",{className:"flex items-center gap-3 mb-4",children:[(0,r.jsx)("div",{className:"w-10 h-10 rounded-lg bg-primary/20 flex items-center justify-center",children:(0,r.jsx)(d.Mail,{className:"w-5 h-5 text-primary"})}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h2",{className:"text-xl font-semibold text-foreground",children:"Change Email"}),(0,r.jsxs)("p",{className:"text-sm text-muted-foreground",children:["Current: ",e?.email]})]})]}),(0,r.jsxs)("form",{onSubmit:es,className:"space-y-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-foreground mb-2",children:"New Email"}),(0,r.jsx)("input",{type:"email",value:y,onChange:e=>v(e.target.value),className:"w-full px-4 py-3 bg-background border border-border rounded-lg text-foreground placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent transition-all duration-200",placeholder:"newemail@example.com",required:!0})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-foreground mb-2",children:"Confirm Password"}),(0,r.jsx)("input",{type:"password",value:j,onChange:e=>w(e.target.value),className:"w-full px-4 py-3 bg-background border border-border rounded-lg text-foreground placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent transition-all duration-200",placeholder:"••••••••",required:!0})]}),P&&(0,r.jsxs)("div",{className:"flex items-center gap-2 p-3 bg-destructive/10 border border-destructive/20 text-destructive rounded-lg text-sm",children:[(0,r.jsx)(x.X,{className:"w-4 h-4"}),P]}),S&&(0,r.jsxs)("div",{className:"flex items-center gap-2 p-3 bg-green-500/10 border border-green-500/20 text-green-500 rounded-lg text-sm",children:[(0,r.jsx)(m,{className:"w-4 h-4"}),S]}),(0,r.jsx)("button",{type:"submit",disabled:N,className:"w-full py-3 px-4 bg-primary hover:bg-primary/90 text-primary-foreground font-semibold rounded-lg shadow-lg transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed hover:scale-[1.02] active:scale-[0.98]",children:N?"Updating...":"Update Email"})]})]}),(0,r.jsxs)("div",{className:"bg-card/50 backdrop-blur-sm rounded-2xl shadow-lg border border-border/50 p-6 transition-all duration-300 hover:shadow-xl",children:[(0,r.jsxs)("div",{className:"flex items-center gap-3 mb-4",children:[(0,r.jsx)("div",{className:"w-10 h-10 rounded-lg bg-primary/20 flex items-center justify-center",children:(0,r.jsx)(l.Lock,{className:"w-5 h-5 text-primary"})}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h2",{className:"text-xl font-semibold text-foreground",children:"Change Password"}),(0,r.jsx)("p",{className:"text-sm text-muted-foreground",children:"Update your password"})]})]}),(0,r.jsxs)("form",{onSubmit:ea,className:"space-y-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-foreground mb-2",children:"Current Password"}),(0,r.jsx)("input",{type:"password",value:O,onChange:e=>T(e.target.value),className:"w-full px-4 py-3 bg-background border border-border rounded-lg text-foreground placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent transition-all duration-200",placeholder:"••••••••",required:!0})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-foreground mb-2",children:"New Password"}),(0,r.jsx)("input",{type:"password",value:U,onChange:e=>q(e.target.value),className:"w-full px-4 py-3 bg-background border border-border rounded-lg text-foreground placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent transition-all duration-200",placeholder:"••••••••",minLength:8,required:!0})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-foreground mb-2",children:"Confirm New Password"}),(0,r.jsx)("input",{type:"password",value:A,onChange:e=>z(e.target.value),className:"w-full px-4 py-3 bg-background border border-border rounded-lg text-foreground placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent transition-all duration-200",placeholder:"••••••••",required:!0})]}),F&&(0,r.jsxs)("div",{className:"flex items-center gap-2 p-3 bg-destructive/10 border border-destructive/20 text-destructive rounded-lg text-sm",children:[(0,r.jsx)(x.X,{className:"w-4 h-4"}),F]}),L&&(0,r.jsxs)("div",{className:"flex items-center gap-2 p-3 bg-green-500/10 border border-green-500/20 text-green-500 rounded-lg text-sm",children:[(0,r.jsx)(m,{className:"w-4 h-4"}),L]}),(0,r.jsx)("button",{type:"submit",disabled:D,className:"w-full py-3 px-4 bg-primary hover:bg-primary/90 text-primary-foreground font-semibold rounded-lg shadow-lg transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed hover:scale-[1.02] active:scale-[0.98]",children:D?"Updating...":"Update Password"})]})]}),(0,r.jsxs)("div",{className:"bg-card/50 backdrop-blur-sm rounded-2xl shadow-lg border border-border/50 p-6 transition-all duration-300 hover:shadow-xl",children:[(0,r.jsxs)("div",{className:"flex items-center gap-3 mb-4",children:[(0,r.jsx)("div",{className:"w-10 h-10 rounded-lg bg-primary/20 flex items-center justify-center",children:(0,r.jsx)(o.User,{className:"w-5 h-5 text-primary"})}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h2",{className:"text-xl font-semibold text-foreground",children:"Change Username"}),(0,r.jsxs)("p",{className:"text-sm text-muted-foreground",children:["Current: @",h||"Not set"]})]})]}),(0,r.jsxs)("form",{onSubmit:ed,className:"space-y-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-foreground mb-2",children:"New Username"}),(0,r.jsx)("input",{type:"text",value:X,onChange:e=>H(e.target.value.toLowerCase().replace(/[^a-z0-9_]/g,"")),className:"w-full px-4 py-3 bg-background border border-border rounded-lg text-foreground placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent transition-all duration-200",placeholder:"username",minLength:3,maxLength:20,pattern:"[a-z0-9_]{3,20}",required:!0}),(0,r.jsx)("p",{className:"text-xs text-muted-foreground mt-1",children:"3-20 characters, letters, numbers, and underscores only"})]}),_&&(0,r.jsxs)("div",{className:"flex items-center gap-2 p-3 bg-destructive/10 border border-destructive/20 text-destructive rounded-lg text-sm",children:[(0,r.jsx)(x.X,{className:"w-4 h-4"}),_]}),B&&(0,r.jsxs)("div",{className:"flex items-center gap-2 p-3 bg-green-500/10 border border-green-500/20 text-green-500 rounded-lg text-sm",children:[(0,r.jsx)(m,{className:"w-4 h-4"}),B]}),(0,r.jsx)("button",{type:"submit",disabled:J,className:"w-full py-3 px-4 bg-primary hover:bg-primary/90 text-primary-foreground font-semibold rounded-lg shadow-lg transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed hover:scale-[1.02] active:scale-[0.98]",children:J?"Updating...":"Update Username"})]})]}),(0,r.jsxs)("div",{className:"bg-destructive/5 backdrop-blur-sm rounded-2xl shadow-lg border border-destructive/20 p-6 transition-all duration-300 hover:shadow-xl",children:[(0,r.jsxs)("div",{className:"flex items-center gap-3 mb-4",children:[(0,r.jsx)("div",{className:"w-10 h-10 rounded-lg bg-destructive/20 flex items-center justify-center",children:(0,r.jsx)(i,{className:"w-5 h-5 text-destructive"})}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h2",{className:"text-xl font-semibold text-destructive",children:"Delete Account"}),(0,r.jsx)("p",{className:"text-sm text-muted-foreground",children:"Permanently delete your account and all data"})]})]}),(0,r.jsx)("button",{onClick:()=>Y(!0),className:"w-full py-3 px-4 bg-destructive hover:bg-destructive/90 text-white font-semibold rounded-lg shadow-lg transition-all duration-200 hover:scale-[1.02] active:scale-[0.98]",children:"Delete Account"})]}),(0,r.jsxs)("div",{className:"bg-card/50 backdrop-blur-sm rounded-2xl shadow-lg border border-border/50 p-6 transition-all duration-300 hover:shadow-xl",children:[(0,r.jsxs)("div",{className:"flex items-center gap-3 mb-4",children:[(0,r.jsx)("div",{className:"w-10 h-10 rounded-lg bg-secondary flex items-center justify-center",children:(0,r.jsx)(c,{className:"w-5 h-5 text-foreground"})}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h2",{className:"text-xl font-semibold text-foreground",children:"Sign Out"}),(0,r.jsx)("p",{className:"text-sm text-muted-foreground",children:"Sign out of your account"})]})]}),(0,r.jsx)("button",{onClick:eo,className:"w-full py-3 px-4 bg-secondary hover:bg-secondary/80 text-foreground font-semibold rounded-lg shadow-lg transition-all duration-200 hover:scale-[1.02] active:scale-[0.98]",children:"Sign Out"})]}),W&&(0,r.jsx)("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm z-50 flex items-center justify-center p-4",children:(0,r.jsxs)("div",{className:"bg-card rounded-2xl shadow-2xl border border-border/50 max-w-md w-full p-6 space-y-4",children:[(0,r.jsxs)("div",{className:"flex items-center gap-3",children:[(0,r.jsx)("div",{className:"w-12 h-12 rounded-lg bg-destructive/20 flex items-center justify-center",children:(0,r.jsx)(u,{className:"w-6 h-6 text-destructive"})}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:"text-xl font-bold text-foreground",children:"Delete Account?"}),(0,r.jsx)("p",{className:"text-sm text-muted-foreground",children:"This action cannot be undone"})]})]}),(0,r.jsx)("p",{className:"text-foreground",children:"Are you sure you want to delete your account? All your data, including queries, stats, and preferences will be permanently removed."}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-foreground mb-2",children:"Confirm with Password"}),(0,r.jsx)("input",{type:"password",value:G,onChange:e=>Q(e.target.value),className:"w-full px-4 py-3 bg-background border border-border rounded-lg text-foreground placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-destructive focus:border-transparent transition-all duration-200",placeholder:"••••••••"})]}),er&&(0,r.jsxs)("div",{className:"flex items-center gap-2 p-3 bg-destructive/10 border border-destructive/20 text-destructive rounded-lg text-sm",children:[(0,r.jsx)(x.X,{className:"w-4 h-4"}),er]}),(0,r.jsxs)("div",{className:"flex gap-3",children:[(0,r.jsx)("button",{onClick:()=>{Y(!1),Q(""),et("")},className:"flex-1 py-3 px-4 bg-secondary hover:bg-secondary/80 text-foreground font-semibold rounded-lg transition-all duration-200",children:"Cancel"}),(0,r.jsx)("button",{onClick:el,disabled:Z||!G,className:"flex-1 py-3 px-4 bg-destructive hover:bg-destructive/90 text-white font-semibold rounded-lg transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed",children:Z?"Deleting...":"Delete Forever"})]})]})})]})}e.s(["default",()=>h],41507)}]);