{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 82, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/samga/OneDrive/Desktop/AI%20Stat/with-supabase-app/app/api/check-username/route.ts"],"sourcesContent":["import { NextResponse } from 'next/server'\nimport { createClient } from '@supabase/supabase-js'\n\nconst supabase = createClient(\n  process.env.NEXT_PUBLIC_SUPABASE_URL!,\n  process.env.SUPABASE_SERVICE_ROLE_KEY!\n)\n\nexport async function POST(request: Request) {\n  try {\n    const { username } = await request.json()\n\n    if (!username) {\n      return NextResponse.json(\n        { error: 'Username is required' },\n        { status: 400 }\n      )\n    }\n\n    // Validate username format\n    const usernameRegex = /^[a-zA-Z0-9_]{3,20}$/\n    if (!usernameRegex.test(username)) {\n      return NextResponse.json(\n        { error: 'Username must be 3-20 characters and contain only letters, numbers, and underscores' },\n        { status: 400 }\n      )\n    }\n\n    // Check if username exists\n    const { data, error } = await supabase\n      .from('profiles')\n      .select('username')\n      .eq('username', username)\n      .single()\n\n    if (error && error.code !== 'PGRST116') {\n      // PGRST116 is \"not found\" which means username is available\n      throw error\n    }\n\n    const isAvailable = !data\n\n    return NextResponse.json({\n      success: true,\n      available: isAvailable,\n      message: isAvailable ? 'Username is available' : 'Username is already taken'\n    })\n  } catch (error: any) {\n    console.error('Check username error:', error)\n    return NextResponse.json(\n      { error: error.message || 'Failed to check username' },\n      { status: 500 }\n    )\n  }\n}\n"],"names":[],"mappings":";;;;AAAA;AACA;;;AAEA,MAAM,WAAW,IAAA,yMAAY,gFAE3B,QAAQ,GAAG,CAAC,yBAAyB;AAGhC,eAAe,KAAK,OAAgB;IACzC,IAAI;QACF,MAAM,EAAE,QAAQ,EAAE,GAAG,MAAM,QAAQ,IAAI;QAEvC,IAAI,CAAC,UAAU;YACb,OAAO,gJAAY,CAAC,IAAI,CACtB;gBAAE,OAAO;YAAuB,GAChC;gBAAE,QAAQ;YAAI;QAElB;QAEA,2BAA2B;QAC3B,MAAM,gBAAgB;QACtB,IAAI,CAAC,cAAc,IAAI,CAAC,WAAW;YACjC,OAAO,gJAAY,CAAC,IAAI,CACtB;gBAAE,OAAO;YAAsF,GAC/F;gBAAE,QAAQ;YAAI;QAElB;QAEA,2BAA2B;QAC3B,MAAM,EAAE,IAAI,EAAE,KAAK,EAAE,GAAG,MAAM,SAC3B,IAAI,CAAC,YACL,MAAM,CAAC,YACP,EAAE,CAAC,YAAY,UACf,MAAM;QAET,IAAI,SAAS,MAAM,IAAI,KAAK,YAAY;YACtC,4DAA4D;YAC5D,MAAM;QACR;QAEA,MAAM,cAAc,CAAC;QAErB,OAAO,gJAAY,CAAC,IAAI,CAAC;YACvB,SAAS;YACT,WAAW;YACX,SAAS,cAAc,0BAA0B;QACnD;IACF,EAAE,OAAO,OAAY;QACnB,QAAQ,KAAK,CAAC,yBAAyB;QACvC,OAAO,gJAAY,CAAC,IAAI,CACtB;YAAE,OAAO,MAAM,OAAO,IAAI;QAA2B,GACrD;YAAE,QAAQ;QAAI;IAElB;AACF","debugId":null}}]
}