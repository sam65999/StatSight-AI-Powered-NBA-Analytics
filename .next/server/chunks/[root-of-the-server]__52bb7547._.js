module.exports=[93695,(e,t,r)=>{t.exports=e.x("next/dist/shared/lib/no-fallback-error.external.js",()=>require("next/dist/shared/lib/no-fallback-error.external.js"))},70406,(e,t,r)=>{t.exports=e.x("next/dist/compiled/@opentelemetry/api",()=>require("next/dist/compiled/@opentelemetry/api"))},18622,(e,t,r)=>{t.exports=e.x("next/dist/compiled/next-server/app-page-turbo.runtime.prod.js",()=>require("next/dist/compiled/next-server/app-page-turbo.runtime.prod.js"))},56704,(e,t,r)=>{t.exports=e.x("next/dist/server/app-render/work-async-storage.external.js",()=>require("next/dist/server/app-render/work-async-storage.external.js"))},32319,(e,t,r)=>{t.exports=e.x("next/dist/server/app-render/work-unit-async-storage.external.js",()=>require("next/dist/server/app-render/work-unit-async-storage.external.js"))},24725,(e,t,r)=>{t.exports=e.x("next/dist/server/app-render/after-task-async-storage.external.js",()=>require("next/dist/server/app-render/after-task-async-storage.external.js"))},95448,e=>{"use strict";class t extends Error{statusCode;isRateLimitError;isTimeoutError;constructor(e,t,r,s){super(e),this.statusCode=t,this.isRateLimitError=r,this.isTimeoutError=s,this.name="AIClientError"}}class r{apiKey;siteUrl;appTitle;PRIMARY_MODEL="mistralai/mistral-small-3.1-24b-instruct:free";FALLBACK_MODEL="deepseek/deepseek-chat-v3.1:free";OPENROUTER_URL="https://openrouter.ai/api/v1/chat/completions";REQUEST_TIMEOUT=3e4;constructor(e){if(!e.apiKey)throw new t("OpenRouter API key is required");this.apiKey=e.apiKey,this.siteUrl=e.siteUrl||"http://localhost:3000",this.appTitle=e.appTitle||"StatSight AI"}async complete(e){let r=null;try{return console.log(`[AI Client] Attempting request with primary model: ${this.PRIMARY_MODEL}`),{content:await this.makeRequest(this.PRIMARY_MODEL,e),model_used:this.PRIMARY_MODEL,fallback_triggered:!1}}catch(e){if(console.error("[AI Client] Primary model failed:",(r=this.handleError(e)).message),!this.shouldFallback(r))throw r}try{return console.log(`[AI Client] Attempting request with fallback model: ${this.FALLBACK_MODEL}`),{content:await this.makeRequest(this.FALLBACK_MODEL,e),model_used:this.FALLBACK_MODEL,fallback_triggered:!0}}catch(s){let e=this.handleError(s);throw console.error("[AI Client] Fallback model also failed:",e.message),new t(`Both AI models failed. Primary: ${r?.message}. Fallback: ${e.message}`,e.statusCode)}}async makeRequest(e,r){let s=new AbortController,a=setTimeout(()=>s.abort(),this.REQUEST_TIMEOUT);try{let o=await fetch(this.OPENROUTER_URL,{method:"POST",headers:{Authorization:`Bearer ${this.apiKey}`,"Content-Type":"application/json","HTTP-Referer":this.siteUrl,"X-Title":this.appTitle},body:JSON.stringify({model:e,messages:r.messages,temperature:r.temperature??.3,max_tokens:r.max_tokens??600,...r.response_format&&{response_format:r.response_format}}),signal:s.signal});if(clearTimeout(a),!o.ok){let e=await o.text(),r=e;try{let t=JSON.parse(e);r=t.error?.message||t.message||e}catch{}throw new t(r,o.status,429===o.status,!1)}let i=await o.json(),n=i.choices?.[0]?.message?.content;if(!n)throw new t("No content in AI response");return n}catch(e){if(clearTimeout(a),"AbortError"===e.name)throw new t(`Request timeout after ${this.REQUEST_TIMEOUT/1e3}s`,408,!1,!0);if(e instanceof t)throw e;throw new t(e.message||"Unknown error during AI request",500)}}shouldFallback(e){return e.isRateLimitError?(console.log("[AI Client] Rate limit detected, will attempt fallback"),!0):e.isTimeoutError?(console.log("[AI Client] Timeout detected, will attempt fallback"),!0):e.statusCode&&e.statusCode>=500?(console.log("[AI Client] Server error detected, will attempt fallback"),!0):!e.statusCode||!(e.statusCode>=400)||!(e.statusCode<500)||(console.log("[AI Client] Client error detected, will NOT attempt fallback"),!1)}handleError(e){return e instanceof t?e:"AbortError"===e.name?new t("Request timeout",408,!1,!0):new t(e.message||"Unknown error",e.statusCode||500)}}function s(e){let s=e||process.env.OPENROUTER_API_KEY;if(!s)throw new t("OPENROUTER_API_KEY environment variable is not set");return new r({apiKey:s,siteUrl:"http://localhost:3000",appTitle:"StatSight AI Predictions"})}function a(e,t){try{let r=e.match(/\{[\s\S]*\}/);if(r)return JSON.parse(r[0]);return console.warn("[AI Client] No JSON found in response, using fallback"),t}catch(e){return console.error("[AI Client] Error parsing JSON:",e),t}}e.s(["createAIClient",()=>s,"parseAIResponse",()=>a])}];

//# sourceMappingURL=%5Broot-of-the-server%5D__52bb7547._.js.map