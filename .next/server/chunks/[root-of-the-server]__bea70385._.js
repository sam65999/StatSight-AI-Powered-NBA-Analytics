module.exports=[93695,(e,t,r)=>{t.exports=e.x("next/dist/shared/lib/no-fallback-error.external.js",()=>require("next/dist/shared/lib/no-fallback-error.external.js"))},70406,(e,t,r)=>{t.exports=e.x("next/dist/compiled/@opentelemetry/api",()=>require("next/dist/compiled/@opentelemetry/api"))},18622,(e,t,r)=>{t.exports=e.x("next/dist/compiled/next-server/app-page-turbo.runtime.prod.js",()=>require("next/dist/compiled/next-server/app-page-turbo.runtime.prod.js"))},56704,(e,t,r)=>{t.exports=e.x("next/dist/server/app-render/work-async-storage.external.js",()=>require("next/dist/server/app-render/work-async-storage.external.js"))},32319,(e,t,r)=>{t.exports=e.x("next/dist/server/app-render/work-unit-async-storage.external.js",()=>require("next/dist/server/app-render/work-unit-async-storage.external.js"))},24725,(e,t,r)=>{t.exports=e.x("next/dist/server/app-render/after-task-async-storage.external.js",()=>require("next/dist/server/app-render/after-task-async-storage.external.js"))},95448,e=>{"use strict";class t extends Error{statusCode;isRateLimitError;isTimeoutError;constructor(e,t,r,a){super(e),this.statusCode=t,this.isRateLimitError=r,this.isTimeoutError=a,this.name="AIClientError"}}class r{apiKey;siteUrl;appTitle;PRIMARY_MODEL="mistralai/mistral-small-3.1-24b-instruct:free";FALLBACK_MODEL="deepseek/deepseek-chat-v3.1:free";OPENROUTER_URL="https://openrouter.ai/api/v1/chat/completions";REQUEST_TIMEOUT=3e4;constructor(e){if(!e.apiKey)throw new t("OpenRouter API key is required");this.apiKey=e.apiKey,this.siteUrl=e.siteUrl||"http://localhost:3000",this.appTitle=e.appTitle||"StatSight AI"}async complete(e){let r=null;try{return console.log(`[AI Client] Attempting request with primary model: ${this.PRIMARY_MODEL}`),{content:await this.makeRequest(this.PRIMARY_MODEL,e),model_used:this.PRIMARY_MODEL,fallback_triggered:!1}}catch(e){if(console.error("[AI Client] Primary model failed:",(r=this.handleError(e)).message),!this.shouldFallback(r))throw r}try{return console.log(`[AI Client] Attempting request with fallback model: ${this.FALLBACK_MODEL}`),{content:await this.makeRequest(this.FALLBACK_MODEL,e),model_used:this.FALLBACK_MODEL,fallback_triggered:!0}}catch(a){let e=this.handleError(a);throw console.error("[AI Client] Fallback model also failed:",e.message),new t(`Both AI models failed. Primary: ${r?.message}. Fallback: ${e.message}`,e.statusCode)}}async makeRequest(e,r){let a=new AbortController,s=setTimeout(()=>a.abort(),this.REQUEST_TIMEOUT);try{let n=await fetch(this.OPENROUTER_URL,{method:"POST",headers:{Authorization:`Bearer ${this.apiKey}`,"Content-Type":"application/json","HTTP-Referer":this.siteUrl,"X-Title":this.appTitle},body:JSON.stringify({model:e,messages:r.messages,temperature:r.temperature??.3,max_tokens:r.max_tokens??600,...r.response_format&&{response_format:r.response_format}}),signal:a.signal});if(clearTimeout(s),!n.ok){let e=await n.text(),r=e;try{let t=JSON.parse(e);r=t.error?.message||t.message||e}catch{}throw new t(r,n.status,429===n.status,!1)}let o=await n.json(),i=o.choices?.[0]?.message?.content;if(!i)throw new t("No content in AI response");return i}catch(e){if(clearTimeout(s),"AbortError"===e.name)throw new t(`Request timeout after ${this.REQUEST_TIMEOUT/1e3}s`,408,!1,!0);if(e instanceof t)throw e;throw new t(e.message||"Unknown error during AI request",500)}}shouldFallback(e){return e.isRateLimitError?(console.log("[AI Client] Rate limit detected, will attempt fallback"),!0):e.isTimeoutError?(console.log("[AI Client] Timeout detected, will attempt fallback"),!0):e.statusCode&&e.statusCode>=500?(console.log("[AI Client] Server error detected, will attempt fallback"),!0):!e.statusCode||!(e.statusCode>=400)||!(e.statusCode<500)||(console.log("[AI Client] Client error detected, will NOT attempt fallback"),!1)}handleError(e){return e instanceof t?e:"AbortError"===e.name?new t("Request timeout",408,!1,!0):new t(e.message||"Unknown error",e.statusCode||500)}}function a(e){let a=e||process.env.OPENROUTER_API_KEY;if(!a)throw new t("OPENROUTER_API_KEY environment variable is not set");return new r({apiKey:a,siteUrl:"http://localhost:3000",appTitle:"StatSight AI Predictions"})}function s(e,t){try{let r=e.match(/\{[\s\S]*\}/);if(r)return JSON.parse(r[0]);return console.warn("[AI Client] No JSON found in response, using fallback"),t}catch(e){return console.error("[AI Client] Error parsing JSON:",e),t}}e.s(["createAIClient",()=>a,"parseAIResponse",()=>s])},37043,e=>{"use strict";var t=e.i(47909),r=e.i(74017),a=e.i(96250),s=e.i(59756),n=e.i(61916),o=e.i(14444),i=e.i(37092),l=e.i(69741),d=e.i(16795),c=e.i(87718),p=e.i(95169),u=e.i(47587),m=e.i(66012),h=e.i(70101),f=e.i(26937),g=e.i(10372),R=e.i(93695);e.i(52474);var w=e.i(5232),A=e.i(89171),E=e.i(95448);async function P(e){try{var t,r,a,s,n,o;let i,{team1:l,team2:d,team1Stats:c,team2Stats:p,gameDate:u,liveScore:m}=await e.json();if(!l||!d||!c||!p)return A.NextResponse.json({error:"Missing required fields: team1, team2, team1Stats, team2Stats"},{status:400});let h=(t=l,r=d,a=c,s=p,n=u,o=m,i="",o?.status==="live"?i=`

ðŸ”´ LIVE GAME IN PROGRESS:
Current Score: ${t} ${o.team1Score||0} - ${o.team2Score||0} ${r}

Based on the current score and team statistics, provide an updated prediction for the final outcome.`:o?.status==="final"&&(i=`

âœ… GAME COMPLETED:
Final Score: ${t} ${o.team1Score||0} - ${o.team2Score||0} ${r}

Provide analysis of the outcome based on the final score and pre-game statistics.`),`
Analyze the NBA game${n?` on ${n}`:""} between ${t} and ${r}${o?.status?` (Status: ${o.status.toUpperCase()})`:" and predict the outcome"}.${i}

${t.toUpperCase()} STATISTICS:
- Record: ${a.wins||0} - ${a.losses||0}
- Win Percentage: ${((a.wins||0)/((a.wins||0)+(a.losses||0))*100).toFixed(1)}%
- Points Per Game: ${a.pointsPerGame||0}
- Points Allowed: ${a.pointsAllowed||0}
- Rebounds Per Game: ${a.reboundsPerGame||0}
- Assists Per Game: ${a.assistsPerGame||0}
- Field Goal %: ${a.fieldGoalPct||0}%
- Three Point %: ${a.threePointPct||0}%
- Recent Form (Last 5): ${a.last5||"N/A"}
${a.topPlayers?`
Top Players:
${a.topPlayers.map(e=>`- ${e.name}: ${e.ppg} PPG, ${e.rpg} RPG, ${e.apg} APG`).join("\n")}`:""}

${r.toUpperCase()} STATISTICS:
- Record: ${s.wins||0} - ${s.losses||0}
- Win Percentage: ${((s.wins||0)/((s.wins||0)+(s.losses||0))*100).toFixed(1)}%
- Points Per Game: ${s.pointsPerGame||0}
- Points Allowed: ${s.pointsAllowed||0}
- Rebounds Per Game: ${s.reboundsPerGame||0}
- Assists Per Game: ${s.assistsPerGame||0}
- Field Goal %: ${s.fieldGoalPct||0}%
- Three Point %: ${s.threePointPct||0}%
- Recent Form (Last 5): ${s.last5||"N/A"}
${s.topPlayers?`
Top Players:
${s.topPlayers.map(e=>`- ${e.name}: ${e.ppg} PPG, ${e.rpg} RPG, ${e.apg} APG`).join("\n")}`:""}

ANALYSIS FACTORS:
1. Overall team record and win percentage
2. Offensive efficiency (PPG) vs defensive efficiency (points allowed)
3. Recent form and momentum
4. Key player performance and matchups
5. Shooting efficiency (FG% and 3P%)
6. Rebounding and assist differentials

Based on this comprehensive data, provide a prediction in the following JSON format:
{
  "winner": "${t}" or "${r}",
  "confidence": "High" or "Medium" or "Low",
  "reasoning": "3-5 sentence explanation based on the stats and matchups provided",
  "scorePrediction": "predicted score (e.g., '112-108')",
  "keyFactors": ["factor 1", "factor 2", "factor 3"],
  "winProbability": number (percentage chance of winner winning, 0-100)
}

Be specific and data-driven. Focus on statistical advantages and matchup analysis.
`);try{let e=(0,E.createAIClient)(),t=await e.complete({messages:[{role:"system",content:"You are an expert NBA game analyst. You predict game outcomes based on team and player statistics. Always respond in JSON format with winner, confidence, reasoning, scorePrediction, keyFactors, and winProbability fields."},{role:"user",content:h}],temperature:.3,max_tokens:700}),r=(0,E.parseAIResponse)(t.content,{winner:l,confidence:"Medium",reasoning:t.content,scorePrediction:"N/A",keyFactors:[],winProbability:50});return t.fallback_triggered&&console.log(`[Game Outcome] Fallback model used: ${t.model_used}`),A.NextResponse.json({success:!0,team1:l,team2:d,gameDate:u,...r,modelUsed:t.model_used,fallbackTriggered:t.fallback_triggered})}catch(e){return console.error("AI Client Error:",e),A.NextResponse.json({error:e.message||"AI service error"},{status:e.statusCode||500})}}catch(e){return console.error("Error in AI game prediction route:",e),A.NextResponse.json({error:e instanceof Error?e.message:"Internal server error"},{status:500})}}e.s(["POST",()=>P],81755);var y=e.i(81755);let x=new t.AppRouteRouteModule({definition:{kind:r.RouteKind.APP_ROUTE,page:"/api/ai-predict-game/route",pathname:"/api/ai-predict-game",filename:"route",bundlePath:""},distDir:".next",relativeProjectDir:"",resolvedPagePath:"[project]/app/api/ai-predict-game/route.ts",nextConfigOutput:"",userland:y}),{workAsyncStorage:v,workUnitAsyncStorage:C,serverHooks:T}=x;function $(){return(0,a.patchFetch)({workAsyncStorage:v,workUnitAsyncStorage:C})}async function b(e,t,a){x.isDev&&(0,s.addRequestMeta)(e,"devRequestTimingInternalsEnd",process.hrtime.bigint());let A="/api/ai-predict-game/route";A=A.replace(/\/index$/,"")||"/";let E=await x.prepare(e,t,{srcPage:A,multiZoneDraftMode:!1});if(!E)return t.statusCode=400,t.end("Bad Request"),null==a.waitUntil||a.waitUntil.call(a,Promise.resolve()),null;let{buildId:P,params:y,nextConfig:v,parsedUrl:C,isDraftMode:T,prerenderManifest:$,routerServerContext:b,isOnDemandRevalidate:S,revalidateOnlyGenerated:O,resolvedPathname:I,clientReferenceManifest:k,serverActionsManifest:_}=E,N=(0,l.normalizeAppPath)(A),U=!!($.dynamicRoutes[N]||$.routes[I]),M=async()=>((null==b?void 0:b.render404)?await b.render404(e,t,C,!1):t.end("This page could not be found"),null);if(U&&!T){let e=!!$.routes[I],t=$.dynamicRoutes[N];if(t&&!1===t.fallback&&!e){if(v.experimental.adapterPath)return await M();throw new R.NoFallbackError}}let L=null;!U||x.isDev||T||(L="/index"===(L=I)?"/":L);let G=!0===x.isDev||!U,q=U&&!G;_&&k&&(0,o.setReferenceManifestsSingleton)({page:A,clientReferenceManifest:k,serverActionsManifest:_,serverModuleMap:(0,i.createServerModuleMap)({serverActionsManifest:_})});let F=e.method||"GET",j=(0,n.getTracer)(),D=j.getActiveScopeSpan(),K={params:y,prerenderManifest:$,renderOpts:{experimental:{authInterrupts:!!v.experimental.authInterrupts},cacheComponents:!!v.cacheComponents,supportsDynamicResponse:G,incrementalCache:(0,s.getRequestMeta)(e,"incrementalCache"),cacheLifeProfiles:v.cacheLife,waitUntil:a.waitUntil,onClose:e=>{t.on("close",e)},onAfterTaskError:void 0,onInstrumentationRequestError:(t,r,a)=>x.onRequestError(e,t,a,b)},sharedContext:{buildId:P}},H=new d.NodeNextRequest(e),B=new d.NodeNextResponse(t),Y=c.NextRequestAdapter.fromNodeNextRequest(H,(0,c.signalFromNodeResponse)(t));try{let o=async e=>x.handle(Y,K).finally(()=>{if(!e)return;e.setAttributes({"http.status_code":t.statusCode,"next.rsc":!1});let r=j.getRootSpanAttributes();if(!r)return;if(r.get("next.span_type")!==p.BaseServerSpan.handleRequest)return void console.warn(`Unexpected root span type '${r.get("next.span_type")}'. Please report this Next.js issue https://github.com/vercel/next.js`);let a=r.get("next.route");if(a){let t=`${F} ${a}`;e.setAttributes({"next.route":a,"http.route":a,"next.span_name":t}),e.updateName(t)}else e.updateName(`${F} ${A}`)}),i=!!(0,s.getRequestMeta)(e,"minimalMode"),l=async s=>{var n,l;let d=async({previousCacheEntry:r})=>{try{if(!i&&S&&O&&!r)return t.statusCode=404,t.setHeader("x-nextjs-cache","REVALIDATED"),t.end("This page could not be found"),null;let n=await o(s);e.fetchMetrics=K.renderOpts.fetchMetrics;let l=K.renderOpts.pendingWaitUntil;l&&a.waitUntil&&(a.waitUntil(l),l=void 0);let d=K.renderOpts.collectedTags;if(!U)return await (0,m.sendResponse)(H,B,n,K.renderOpts.pendingWaitUntil),null;{let e=await n.blob(),t=(0,h.toNodeOutgoingHttpHeaders)(n.headers);d&&(t[g.NEXT_CACHE_TAGS_HEADER]=d),!t["content-type"]&&e.type&&(t["content-type"]=e.type);let r=void 0!==K.renderOpts.collectedRevalidate&&!(K.renderOpts.collectedRevalidate>=g.INFINITE_CACHE)&&K.renderOpts.collectedRevalidate,a=void 0===K.renderOpts.collectedExpire||K.renderOpts.collectedExpire>=g.INFINITE_CACHE?void 0:K.renderOpts.collectedExpire;return{value:{kind:w.CachedRouteKind.APP_ROUTE,status:n.status,body:Buffer.from(await e.arrayBuffer()),headers:t},cacheControl:{revalidate:r,expire:a}}}}catch(t){throw(null==r?void 0:r.isStale)&&await x.onRequestError(e,t,{routerKind:"App Router",routePath:A,routeType:"route",revalidateReason:(0,u.getRevalidateReason)({isStaticGeneration:q,isOnDemandRevalidate:S})},b),t}},c=await x.handleResponse({req:e,nextConfig:v,cacheKey:L,routeKind:r.RouteKind.APP_ROUTE,isFallback:!1,prerenderManifest:$,isRoutePPREnabled:!1,isOnDemandRevalidate:S,revalidateOnlyGenerated:O,responseGenerator:d,waitUntil:a.waitUntil,isMinimalMode:i});if(!U)return null;if((null==c||null==(n=c.value)?void 0:n.kind)!==w.CachedRouteKind.APP_ROUTE)throw Object.defineProperty(Error(`Invariant: app-route received invalid cache entry ${null==c||null==(l=c.value)?void 0:l.kind}`),"__NEXT_ERROR_CODE",{value:"E701",enumerable:!1,configurable:!0});i||t.setHeader("x-nextjs-cache",S?"REVALIDATED":c.isMiss?"MISS":c.isStale?"STALE":"HIT"),T&&t.setHeader("Cache-Control","private, no-cache, no-store, max-age=0, must-revalidate");let p=(0,h.fromNodeOutgoingHttpHeaders)(c.value.headers);return i&&U||p.delete(g.NEXT_CACHE_TAGS_HEADER),!c.cacheControl||t.getHeader("Cache-Control")||p.get("Cache-Control")||p.set("Cache-Control",(0,f.getCacheControlHeader)(c.cacheControl)),await (0,m.sendResponse)(H,B,new Response(c.value.body,{headers:p,status:c.value.status||200})),null};D?await l(D):await j.withPropagatedContext(e.headers,()=>j.trace(p.BaseServerSpan.handleRequest,{spanName:`${F} ${A}`,kind:n.SpanKind.SERVER,attributes:{"http.method":F,"http.target":e.url}},l))}catch(t){if(t instanceof R.NoFallbackError||await x.onRequestError(e,t,{routerKind:"App Router",routePath:N,routeType:"route",revalidateReason:(0,u.getRevalidateReason)({isStaticGeneration:q,isOnDemandRevalidate:S})}),U)throw t;return await (0,m.sendResponse)(H,B,new Response(null,{status:500})),null}}e.s(["handler",()=>b,"patchFetch",()=>$,"routeModule",()=>x,"serverHooks",()=>T,"workAsyncStorage",()=>v,"workUnitAsyncStorage",()=>C],37043)}];

//# sourceMappingURL=%5Broot-of-the-server%5D__bea70385._.js.map