module.exports=[93695,(e,t,r)=>{t.exports=e.x("next/dist/shared/lib/no-fallback-error.external.js",()=>require("next/dist/shared/lib/no-fallback-error.external.js"))},70406,(e,t,r)=>{t.exports=e.x("next/dist/compiled/@opentelemetry/api",()=>require("next/dist/compiled/@opentelemetry/api"))},18622,(e,t,r)=>{t.exports=e.x("next/dist/compiled/next-server/app-page-turbo.runtime.prod.js",()=>require("next/dist/compiled/next-server/app-page-turbo.runtime.prod.js"))},56704,(e,t,r)=>{t.exports=e.x("next/dist/server/app-render/work-async-storage.external.js",()=>require("next/dist/server/app-render/work-async-storage.external.js"))},32319,(e,t,r)=>{t.exports=e.x("next/dist/server/app-render/work-unit-async-storage.external.js",()=>require("next/dist/server/app-render/work-unit-async-storage.external.js"))},24725,(e,t,r)=>{t.exports=e.x("next/dist/server/app-render/after-task-async-storage.external.js",()=>require("next/dist/server/app-render/after-task-async-storage.external.js"))},95448,e=>{"use strict";class t extends Error{statusCode;isRateLimitError;isTimeoutError;constructor(e,t,r,a){super(e),this.statusCode=t,this.isRateLimitError=r,this.isTimeoutError=a,this.name="AIClientError"}}class r{apiKey;siteUrl;appTitle;PRIMARY_MODEL="mistralai/mistral-small-3.1-24b-instruct:free";FALLBACK_MODEL="deepseek/deepseek-chat-v3.1:free";OPENROUTER_URL="https://openrouter.ai/api/v1/chat/completions";REQUEST_TIMEOUT=3e4;constructor(e){if(!e.apiKey)throw new t("OpenRouter API key is required");this.apiKey=e.apiKey,this.siteUrl=e.siteUrl||"http://localhost:3000",this.appTitle=e.appTitle||"StatSight AI"}async complete(e){let r=null;try{return console.log(`[AI Client] Attempting request with primary model: ${this.PRIMARY_MODEL}`),{content:await this.makeRequest(this.PRIMARY_MODEL,e),model_used:this.PRIMARY_MODEL,fallback_triggered:!1}}catch(e){if(console.error("[AI Client] Primary model failed:",(r=this.handleError(e)).message),!this.shouldFallback(r))throw r}try{return console.log(`[AI Client] Attempting request with fallback model: ${this.FALLBACK_MODEL}`),{content:await this.makeRequest(this.FALLBACK_MODEL,e),model_used:this.FALLBACK_MODEL,fallback_triggered:!0}}catch(a){let e=this.handleError(a);throw console.error("[AI Client] Fallback model also failed:",e.message),new t(`Both AI models failed. Primary: ${r?.message}. Fallback: ${e.message}`,e.statusCode)}}async makeRequest(e,r){let a=new AbortController,s=setTimeout(()=>a.abort(),this.REQUEST_TIMEOUT);try{let n=await fetch(this.OPENROUTER_URL,{method:"POST",headers:{Authorization:`Bearer ${this.apiKey}`,"Content-Type":"application/json","HTTP-Referer":this.siteUrl,"X-Title":this.appTitle},body:JSON.stringify({model:e,messages:r.messages,temperature:r.temperature??.3,max_tokens:r.max_tokens??600,...r.response_format&&{response_format:r.response_format}}),signal:a.signal});if(clearTimeout(s),!n.ok){let e=await n.text(),r=e;try{let t=JSON.parse(e);r=t.error?.message||t.message||e}catch{}throw new t(r,n.status,429===n.status,!1)}let o=await n.json(),i=o.choices?.[0]?.message?.content;if(!i)throw new t("No content in AI response");return i}catch(e){if(clearTimeout(s),"AbortError"===e.name)throw new t(`Request timeout after ${this.REQUEST_TIMEOUT/1e3}s`,408,!1,!0);if(e instanceof t)throw e;throw new t(e.message||"Unknown error during AI request",500)}}shouldFallback(e){return e.isRateLimitError?(console.log("[AI Client] Rate limit detected, will attempt fallback"),!0):e.isTimeoutError?(console.log("[AI Client] Timeout detected, will attempt fallback"),!0):e.statusCode&&e.statusCode>=500?(console.log("[AI Client] Server error detected, will attempt fallback"),!0):!e.statusCode||!(e.statusCode>=400)||!(e.statusCode<500)||(console.log("[AI Client] Client error detected, will NOT attempt fallback"),!1)}handleError(e){return e instanceof t?e:"AbortError"===e.name?new t("Request timeout",408,!1,!0):new t(e.message||"Unknown error",e.statusCode||500)}}function a(e){let a=e||process.env.OPENROUTER_API_KEY;if(!a)throw new t("OPENROUTER_API_KEY environment variable is not set");return new r({apiKey:a,siteUrl:"http://localhost:3000",appTitle:"StatSight AI Predictions"})}function s(e,t){try{let r=e.match(/\{[\s\S]*\}/);if(r)return JSON.parse(r[0]);return console.warn("[AI Client] No JSON found in response, using fallback"),t}catch(e){return console.error("[AI Client] Error parsing JSON:",e),t}}e.s(["createAIClient",()=>a,"parseAIResponse",()=>s])},37632,e=>{"use strict";var t=e.i(47909),r=e.i(74017),a=e.i(96250),s=e.i(59756),n=e.i(61916),o=e.i(14444),i=e.i(37092),l=e.i(69741),d=e.i(16795),c=e.i(87718),p=e.i(95169),u=e.i(47587),h=e.i(66012),m=e.i(70101),g=e.i(26937),f=e.i(10372),R=e.i(93695);e.i(52474);var E=e.i(5232),A=e.i(89171),w=e.i(95448);async function y(e){try{var t,r,a,s,n,o;let i,l,d,c,{playerName:p,playerStats:u,propType:h,threshold:m,overUnder:g,opponent:f}=await e.json();if(!p||!u||!h)return A.NextResponse.json({error:"Missing required fields: playerName, playerStats, propType"},{status:400});if(null==m)return A.NextResponse.json({error:"Threshold value is required"},{status:400});if(!g||"over"!==g&&"under"!==g)return A.NextResponse.json({error:"Over/Under direction is required"},{status:400});let R=(t=p,r=u,a=h,s=m,n=g,o=f,i=r.recentGames||[],l=r.seasonAverage||{},c=(d=i.slice(0,5)).length>0?d.reduce((e,t)=>e+(t[a]||0),0)/d.length:0,`
Analyze ${t}'s performance and predict if they will go ${n.toUpperCase()} ${s} ${a} in their upcoming game${o?` against ${o}`:""}.

PLAYER STATISTICS:
- Season Average ${a}: ${l[a]||0}
- Last 5 Games Average ${a}: ${c.toFixed(1)}
- Games Played: ${l.gamesPlayed||0}

RECENT GAME-BY-GAME PERFORMANCE (Last 10 Games):
${i.slice(0,10).map((e,t)=>`Game ${t+1}: ${e[a]||0} ${a} vs ${e.opponent||"Unknown"} (${e.result||"N/A"})`).join("\n")}

PROP BET:
- Line: ${n.toUpperCase()} ${s} ${a}

ANALYSIS FACTORS:
1. How does the threshold (${s}) compare to season average (${l[a]||0})?
2. How does it compare to recent 5-game average (${c.toFixed(1)})?
3. Recent form trend (improving/declining)
4. Consistency of performance across recent games
5. ${o?`Historical performance against ${o}`:"Overall matchup difficulty"}
6. Home/away split if applicable

Based on this data, provide a prediction in the following JSON format:
{
  "prediction": "${n.charAt(0).toUpperCase()+n.slice(1)} ${s}" or explain if you disagree,
  "confidence": "High" or "Medium" or "Low",
  "reasoning": "2-4 sentence explanation based on the stats provided. Specifically address why ${t} will or won't hit ${n} ${s} ${a}.",
  "statsUsed": ["key stat 1", "key stat 2", "key stat 3"],
  "projectedValue": number (your projected stat value for this game)
}

Be specific and data-driven. Only use the statistics provided above. Make sure to directly address the ${n} ${s} line.
`);try{let e=(0,w.createAIClient)(),t=await e.complete({messages:[{role:"system",content:"You are an expert NBA statistician and analyst. You provide data-driven predictions based on player performance statistics. Always respond in JSON format with prediction, confidence, reasoning, statsUsed, and projectedValue fields."},{role:"user",content:R}],temperature:.3,max_tokens:600}),r=(0,w.parseAIResponse)(t.content,{prediction:"Unable to determine",confidence:"Medium",reasoning:t.content,statsUsed:[],projectedValue:m});return t.fallback_triggered&&console.log(`[Player Prop] Fallback model used: ${t.model_used}`),A.NextResponse.json({success:!0,playerName:p,propType:h,threshold:m,overUnder:g,opponent:f,...r,modelUsed:t.model_used,fallbackTriggered:t.fallback_triggered})}catch(e){return console.error("AI Client Error:",e),A.NextResponse.json({error:e.message||"AI service error"},{status:e.statusCode||500})}}catch(e){return console.error("Error in AI prediction route:",e),A.NextResponse.json({error:e instanceof Error?e.message:"Internal server error"},{status:500})}}e.s(["POST",()=>y],88236);var v=e.i(88236);let x=new t.AppRouteRouteModule({definition:{kind:r.RouteKind.APP_ROUTE,page:"/api/ai-predict-player/route",pathname:"/api/ai-predict-player",filename:"route",bundlePath:""},distDir:".next",relativeProjectDir:"",resolvedPagePath:"[project]/app/api/ai-predict-player/route.ts",nextConfigOutput:"",userland:v}),{workAsyncStorage:C,workUnitAsyncStorage:T,serverHooks:O}=x;function b(){return(0,a.patchFetch)({workAsyncStorage:C,workUnitAsyncStorage:T})}async function k(e,t,a){x.isDev&&(0,s.addRequestMeta)(e,"devRequestTimingInternalsEnd",process.hrtime.bigint());let A="/api/ai-predict-player/route";A=A.replace(/\/index$/,"")||"/";let w=await x.prepare(e,t,{srcPage:A,multiZoneDraftMode:!1});if(!w)return t.statusCode=400,t.end("Bad Request"),null==a.waitUntil||a.waitUntil.call(a,Promise.resolve()),null;let{buildId:y,params:v,nextConfig:C,parsedUrl:T,isDraftMode:O,prerenderManifest:b,routerServerContext:k,isOnDemandRevalidate:I,revalidateOnlyGenerated:_,resolvedPathname:N,clientReferenceManifest:$,serverActionsManifest:P}=w,S=(0,l.normalizeAppPath)(A),U=!!(b.dynamicRoutes[S]||b.routes[N]),M=async()=>((null==k?void 0:k.render404)?await k.render404(e,t,T,!1):t.end("This page could not be found"),null);if(U&&!O){let e=!!b.routes[N],t=b.dynamicRoutes[S];if(t&&!1===t.fallback&&!e){if(C.experimental.adapterPath)return await M();throw new R.NoFallbackError}}let q=null;!U||x.isDev||O||(q="/index"===(q=N)?"/":q);let L=!0===x.isDev||!U,j=U&&!L;P&&$&&(0,o.setReferenceManifestsSingleton)({page:A,clientReferenceManifest:$,serverActionsManifest:P,serverModuleMap:(0,i.createServerModuleMap)({serverActionsManifest:P})});let H=e.method||"GET",D=(0,n.getTracer)(),F=D.getActiveScopeSpan(),K={params:v,prerenderManifest:b,renderOpts:{experimental:{authInterrupts:!!C.experimental.authInterrupts},cacheComponents:!!C.cacheComponents,supportsDynamicResponse:L,incrementalCache:(0,s.getRequestMeta)(e,"incrementalCache"),cacheLifeProfiles:C.cacheLife,waitUntil:a.waitUntil,onClose:e=>{t.on("close",e)},onAfterTaskError:void 0,onInstrumentationRequestError:(t,r,a)=>x.onRequestError(e,t,a,k)},sharedContext:{buildId:y}},B=new d.NodeNextRequest(e),Y=new d.NodeNextResponse(t),G=c.NextRequestAdapter.fromNodeNextRequest(B,(0,c.signalFromNodeResponse)(t));try{let o=async e=>x.handle(G,K).finally(()=>{if(!e)return;e.setAttributes({"http.status_code":t.statusCode,"next.rsc":!1});let r=D.getRootSpanAttributes();if(!r)return;if(r.get("next.span_type")!==p.BaseServerSpan.handleRequest)return void console.warn(`Unexpected root span type '${r.get("next.span_type")}'. Please report this Next.js issue https://github.com/vercel/next.js`);let a=r.get("next.route");if(a){let t=`${H} ${a}`;e.setAttributes({"next.route":a,"http.route":a,"next.span_name":t}),e.updateName(t)}else e.updateName(`${H} ${A}`)}),i=!!(0,s.getRequestMeta)(e,"minimalMode"),l=async s=>{var n,l;let d=async({previousCacheEntry:r})=>{try{if(!i&&I&&_&&!r)return t.statusCode=404,t.setHeader("x-nextjs-cache","REVALIDATED"),t.end("This page could not be found"),null;let n=await o(s);e.fetchMetrics=K.renderOpts.fetchMetrics;let l=K.renderOpts.pendingWaitUntil;l&&a.waitUntil&&(a.waitUntil(l),l=void 0);let d=K.renderOpts.collectedTags;if(!U)return await (0,h.sendResponse)(B,Y,n,K.renderOpts.pendingWaitUntil),null;{let e=await n.blob(),t=(0,m.toNodeOutgoingHttpHeaders)(n.headers);d&&(t[f.NEXT_CACHE_TAGS_HEADER]=d),!t["content-type"]&&e.type&&(t["content-type"]=e.type);let r=void 0!==K.renderOpts.collectedRevalidate&&!(K.renderOpts.collectedRevalidate>=f.INFINITE_CACHE)&&K.renderOpts.collectedRevalidate,a=void 0===K.renderOpts.collectedExpire||K.renderOpts.collectedExpire>=f.INFINITE_CACHE?void 0:K.renderOpts.collectedExpire;return{value:{kind:E.CachedRouteKind.APP_ROUTE,status:n.status,body:Buffer.from(await e.arrayBuffer()),headers:t},cacheControl:{revalidate:r,expire:a}}}}catch(t){throw(null==r?void 0:r.isStale)&&await x.onRequestError(e,t,{routerKind:"App Router",routePath:A,routeType:"route",revalidateReason:(0,u.getRevalidateReason)({isStaticGeneration:j,isOnDemandRevalidate:I})},k),t}},c=await x.handleResponse({req:e,nextConfig:C,cacheKey:q,routeKind:r.RouteKind.APP_ROUTE,isFallback:!1,prerenderManifest:b,isRoutePPREnabled:!1,isOnDemandRevalidate:I,revalidateOnlyGenerated:_,responseGenerator:d,waitUntil:a.waitUntil,isMinimalMode:i});if(!U)return null;if((null==c||null==(n=c.value)?void 0:n.kind)!==E.CachedRouteKind.APP_ROUTE)throw Object.defineProperty(Error(`Invariant: app-route received invalid cache entry ${null==c||null==(l=c.value)?void 0:l.kind}`),"__NEXT_ERROR_CODE",{value:"E701",enumerable:!1,configurable:!0});i||t.setHeader("x-nextjs-cache",I?"REVALIDATED":c.isMiss?"MISS":c.isStale?"STALE":"HIT"),O&&t.setHeader("Cache-Control","private, no-cache, no-store, max-age=0, must-revalidate");let p=(0,m.fromNodeOutgoingHttpHeaders)(c.value.headers);return i&&U||p.delete(f.NEXT_CACHE_TAGS_HEADER),!c.cacheControl||t.getHeader("Cache-Control")||p.get("Cache-Control")||p.set("Cache-Control",(0,g.getCacheControlHeader)(c.cacheControl)),await (0,h.sendResponse)(B,Y,new Response(c.value.body,{headers:p,status:c.value.status||200})),null};F?await l(F):await D.withPropagatedContext(e.headers,()=>D.trace(p.BaseServerSpan.handleRequest,{spanName:`${H} ${A}`,kind:n.SpanKind.SERVER,attributes:{"http.method":H,"http.target":e.url}},l))}catch(t){if(t instanceof R.NoFallbackError||await x.onRequestError(e,t,{routerKind:"App Router",routePath:S,routeType:"route",revalidateReason:(0,u.getRevalidateReason)({isStaticGeneration:j,isOnDemandRevalidate:I})}),U)throw t;return await (0,h.sendResponse)(B,Y,new Response(null,{status:500})),null}}e.s(["handler",()=>k,"patchFetch",()=>b,"routeModule",()=>x,"serverHooks",()=>O,"workAsyncStorage",()=>C,"workUnitAsyncStorage",()=>T],37632)}];

//# sourceMappingURL=%5Broot-of-the-server%5D__4d9d1f88._.js.map