module.exports=[13333,a=>{"use strict";var b=a.i(87924),c=a.i(72131);function d({query:a,isOpen:d,onClose:e}){let[f,g]=(0,c.useState)(!1);if(!d||!a)return null;let h=a=>(0,b.jsxs)("span",{className:`px-3 py-1 rounded-full text-sm font-semibold ${{High:"bg-green-100 text-green-800",Medium:"bg-yellow-100 text-yellow-800",Low:"bg-orange-100 text-orange-800"}[a]}`,children:[a," Confidence"]});return(0,b.jsx)("div",{className:"fixed inset-0 z-50 overflow-y-auto",onClick:e,children:(0,b.jsxs)("div",{className:"flex items-center justify-center min-h-screen px-4 pt-4 pb-20 text-center sm:p-0",children:[(0,b.jsx)("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm transition-opacity"}),(0,b.jsxs)("div",{className:"relative inline-block align-bottom bg-card/95 backdrop-blur-md rounded-xl border border-border/50 text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-3xl sm:w-full",onClick:a=>a.stopPropagation(),children:[(0,b.jsx)("div",{className:"bg-gradient-to-r from-blue-600 to-purple-600 px-6 py-4",children:(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h3",{className:"text-xl font-bold text-white",children:"Query Details"}),(0,b.jsx)("p",{className:"text-sm text-blue-100 mt-1",children:new Date(a.created_at).toLocaleString("en-US",{month:"long",day:"numeric",year:"numeric",hour:"numeric",minute:"2-digit",hour12:!0})})]}),(0,b.jsx)("button",{onClick:e,className:"text-white hover:text-gray-200 transition-colors",children:(0,b.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})}),(0,b.jsxs)("div",{className:"px-6 py-6",children:[(0,b.jsx)("div",{className:"mb-6",children:(0,b.jsx)("span",{className:`inline-block px-4 py-2 rounded-full text-sm font-semibold ${(a=>{switch(a){case"AI Prediction - Player Prop":return"bg-blue-100 text-blue-800";case"AI Prediction - Game Outcome":return"bg-purple-100 text-purple-800";case"Player Stats":return"bg-green-100 text-green-800";case"Player Comparison":return"bg-orange-100 text-orange-800";default:return"bg-gray-100 text-gray-800"}})(a.query_type)}`,children:a.query_type})}),(0,b.jsx)("div",{className:"mb-6",children:(()=>{switch(a.query_type){case"AI Prediction - Player Prop":let c;return c=a.details,(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-sm text-muted-foreground mb-1",children:"Player"}),(0,b.jsx)("p",{className:"font-semibold text-foreground",children:c.playerName}),c.team&&(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:c.team})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-sm text-muted-foreground mb-1",children:"Prop Type"}),(0,b.jsx)("p",{className:"font-semibold text-foreground capitalize",children:c.propType})]})]}),(0,b.jsxs)("div",{className:"bg-primary/10 rounded-lg p-4",children:[(0,b.jsx)("p",{className:"text-sm text-muted-foreground mb-1",children:"Prediction"}),(0,b.jsxs)("p",{className:"text-xl font-bold text-foreground",children:[c.overUnder.toUpperCase()," ",c.threshold," ",c.propType]}),c.projectedValue&&(0,b.jsxs)("p",{className:"text-sm text-muted-foreground mt-1",children:["Projected: ",c.projectedValue.toFixed(1)," ",c.propType]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-sm text-muted-foreground mb-2",children:"AI Recommendation"}),(0,b.jsx)("p",{className:"text-lg font-semibold text-blue-600",children:c.prediction})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-sm text-muted-foreground mb-2",children:"Confidence"}),h(c.confidence)]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-sm text-muted-foreground mb-2",children:"Analysis"}),(0,b.jsx)("p",{className:"text-foreground leading-relaxed",children:c.reasoning})]}),c.statsUsed&&c.statsUsed.length>0&&(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-sm text-muted-foreground mb-2",children:"Key Statistics Used"}),(0,b.jsx)("ul",{className:"space-y-1",children:c.statsUsed.map((a,c)=>(0,b.jsxs)("li",{className:"text-sm text-muted-foreground",children:["â€¢ ",a]},c))})]})]});case"AI Prediction - Game Outcome":let d;return d=a.details,(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsxs)("div",{className:"bg-purple-500/10 rounded-lg p-4",children:[(0,b.jsx)("p",{className:"text-sm text-muted-foreground mb-2",children:"Matchup"}),(0,b.jsxs)("p",{className:"text-xl font-bold text-foreground",children:[d.team1," vs ",d.team2]}),d.gameDate&&(0,b.jsx)("p",{className:"text-sm text-muted-foreground mt-1",children:d.gameDate})]}),d.liveScore&&(0,b.jsxs)("div",{className:"bg-destructive/10 rounded-lg p-4 border-l-4 border-destructive",children:[(0,b.jsx)("p",{className:"text-sm text-destructive font-semibold mb-1",children:"live"===d.liveScore.status?"ðŸ”´ LIVE":"FINAL"}),(0,b.jsxs)("p",{className:"text-foreground",children:[d.team1,": ",d.liveScore.team1Score," | ",d.team2,": ",d.liveScore.team2Score]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-sm text-muted-foreground mb-2",children:"Predicted Winner"}),(0,b.jsx)("p",{className:"text-2xl font-bold text-purple-600",children:d.winner}),d.scorePrediction&&(0,b.jsxs)("p",{className:"text-sm text-muted-foreground mt-1",children:["Score: ",d.scorePrediction]})]}),d.winProbability&&(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-sm text-muted-foreground mb-2",children:"Win Probability"}),(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)("div",{className:"flex-1 bg-secondary rounded-full h-3",children:(0,b.jsx)("div",{className:"h-3 rounded-full bg-gradient-to-r from-purple-600 to-purple-400",style:{width:`${d.winProbability}%`}})}),(0,b.jsxs)("span",{className:"text-lg font-bold text-foreground",children:[d.winProbability,"%"]})]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-sm text-muted-foreground mb-2",children:"Confidence"}),h(d.confidence)]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-sm text-muted-foreground mb-2",children:"Analysis"}),(0,b.jsx)("p",{className:"text-foreground leading-relaxed",children:d.reasoning})]}),d.keyFactors&&d.keyFactors.length>0&&(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-sm text-muted-foreground mb-2",children:"Key Factors"}),(0,b.jsx)("ul",{className:"space-y-1",children:d.keyFactors.map((a,c)=>(0,b.jsxs)("li",{className:"text-sm text-muted-foreground",children:["â€¢ ",a]},c))})]})]});case"Player Stats":let e;return e=a.details,(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-sm text-muted-foreground mb-1",children:"Player"}),(0,b.jsx)("p",{className:"text-2xl font-bold text-foreground",children:e.playerName}),(0,b.jsx)("p",{className:"text-muted-foreground",children:e.team}),e.position&&(0,b.jsx)("p",{className:"text-sm text-muted-foreground mt-1",children:e.position})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-sm text-muted-foreground mb-2",children:"Status"}),(0,b.jsx)("span",{className:`px-3 py-1 rounded-full text-sm font-semibold ${e.isActive?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"}`,children:e.isActive?"â— Active":"Inactive"})]}),e.headlineStats&&(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-sm text-muted-foreground mb-3",children:"Headline Stats"}),(0,b.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3",children:[(0,b.jsxs)("div",{className:"bg-primary/10 rounded-lg p-3",children:[(0,b.jsx)("p",{className:"text-xs text-muted-foreground",children:"PPG"}),(0,b.jsx)("p",{className:"text-xl font-bold text-blue-600",children:e.headlineStats.pts.toFixed(1)})]}),(0,b.jsxs)("div",{className:"bg-green-500/10 rounded-lg p-3",children:[(0,b.jsx)("p",{className:"text-xs text-muted-foreground",children:"RPG"}),(0,b.jsx)("p",{className:"text-xl font-bold text-green-600",children:e.headlineStats.reb.toFixed(1)})]}),(0,b.jsxs)("div",{className:"bg-purple-500/10 rounded-lg p-3",children:[(0,b.jsx)("p",{className:"text-xs text-muted-foreground",children:"APG"}),(0,b.jsx)("p",{className:"text-xl font-bold text-purple-600",children:e.headlineStats.ast.toFixed(1)})]}),(0,b.jsxs)("div",{className:"bg-orange-500/10 rounded-lg p-3",children:[(0,b.jsx)("p",{className:"text-xs text-muted-foreground",children:"PIE"}),(0,b.jsx)("p",{className:"text-xl font-bold text-orange-600",children:e.headlineStats.pie.toFixed(3)})]})]})]})]});case"Player Comparison":let f;return f=a.details,(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,b.jsxs)("div",{className:"bg-primary/10 rounded-lg p-4",children:[(0,b.jsx)("p",{className:"text-sm text-muted-foreground mb-1",children:"Player 1"}),(0,b.jsx)("p",{className:"text-lg font-bold text-foreground",children:f.player1.name}),(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:f.player1.team})]}),(0,b.jsxs)("div",{className:"bg-green-500/10 rounded-lg p-4",children:[(0,b.jsx)("p",{className:"text-sm text-muted-foreground mb-1",children:"Player 2"}),(0,b.jsx)("p",{className:"text-lg font-bold text-foreground",children:f.player2.name}),(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:f.player2.team})]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-sm text-muted-foreground mb-1",children:"Season"}),(0,b.jsx)("p",{className:"font-semibold text-foreground",children:f.season})]}),f.comparisonStats&&(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-sm text-muted-foreground mb-3",children:"Comparison Stats"}),(0,b.jsx)("div",{className:"space-y-2",children:Object.entries(f.comparisonStats).map(([a,c])=>c&&"object"==typeof c&&"player1"in c&&"player2"in c?(0,b.jsxs)("div",{className:"bg-secondary/30 rounded-lg p-3",children:[(0,b.jsx)("p",{className:"text-xs text-muted-foreground mb-2 capitalize",children:a}),(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsx)("span",{className:"text-sm font-semibold text-blue-600",children:"number"==typeof c.player1?c.player1.toFixed(1):c.player1}),(0,b.jsx)("span",{className:"text-xs text-muted-foreground/70",children:"vs"}),(0,b.jsx)("span",{className:"text-sm font-semibold text-green-600",children:"number"==typeof c.player2?c.player2.toFixed(1):c.player2})]})]},a):null)})]})]});default:return(0,b.jsx)("p",{className:"text-muted-foreground",children:"Unknown query type"})}})()}),(0,b.jsxs)("div",{className:"border-t pt-4",children:[(0,b.jsxs)("button",{onClick:()=>g(!f),className:"text-sm text-blue-600 hover:text-blue-700 font-medium",children:[f?"â–¼ Hide":"â–¶ Show"," Raw JSON"]}),f&&(0,b.jsx)("pre",{className:"mt-3 p-4 bg-secondary/30 rounded-lg text-xs overflow-x-auto text-foreground",children:JSON.stringify(a,null,2)})]})]}),(0,b.jsx)("div",{className:"bg-secondary/30 px-6 py-4",children:(0,b.jsx)("button",{onClick:e,className:"w-full px-4 py-2 bg-primary text-primary-foreground rounded-lg hover:bg-primary/90 transition-all hover:scale-105 active:scale-95 font-medium",children:"Close"})})]})]})})}function e(){let[a,e]=(0,c.useState)([]),[f,g]=(0,c.useState)([]),[h,i]=(0,c.useState)(!0),[j,k]=(0,c.useState)(null),[l,m]=(0,c.useState)(null),[n,o]=(0,c.useState)(!1),[p,q]=(0,c.useState)("all"),[r,s]=(0,c.useState)(null);(0,c.useEffect)(()=>{t()},[]),(0,c.useEffect)(()=>{a.length>0&&u()},[p,a]);let t=async()=>{i(!0),k(null);try{let a=await fetch("/api/queries?limit=100"),b=await a.json();if(!a.ok||!b.success)throw Error(b.error||"Failed to fetch queries");e(b.queries),w(b.queries),v(b.queries,p)}catch(a){console.error("Error fetching queries:",a),k(a instanceof Error?a.message:"Failed to load query history")}finally{i(!1)}},u=()=>{v(a,p)},v=(a,b)=>{"all"===b?g(a):g(a.filter(a=>a.query_type===b))},w=a=>{if(0===a.length)return void s(null);let b={"AI Prediction - Player Prop":0,"AI Prediction - Game Outcome":0,"Player Stats":0,"Player Comparison":0};a.forEach(a=>{b[a.query_type]=(b[a.query_type]||0)+1});let c=Object.entries(b).reduce((a,b)=>b[1]>a[1]?b:a)[0],d=a[0]?.created_at;s({totalQueries:a.length,mostRecentDate:d,mostCommonType:c,queryTypeCounts:b})},x=a=>{let b=new Date(a),c=new Date,d=c.getTime()-b.getTime(),e=Math.floor(d/6e4),f=Math.floor(d/36e5),g=Math.floor(d/864e5);return e<1?"Just now":e<60?`${e} min${e>1?"s":""} ago`:f<24?`${f} hour${f>1?"s":""} ago`:g<7?`${g} day${g>1?"s":""} ago`:b.toLocaleDateString("en-US",{month:"short",day:"numeric",year:b.getFullYear()!==c.getFullYear()?"numeric":void 0})},y=a=>{switch(a){case"AI Prediction - Player Prop":return"ðŸŽ¯";case"AI Prediction - Game Outcome":return"ðŸ†";case"Player Stats":return"ðŸ“Š";case"Player Comparison":return"âš–ï¸"}};return h?(0,b.jsx)("div",{className:"flex items-center justify-center min-h-[60vh]",children:(0,b.jsxs)("div",{className:"text-center",children:[(0,b.jsx)("div",{className:"animate-spin rounded-full h-16 w-16 border-b-4 border-blue-600 mx-auto mb-4"}),(0,b.jsx)("p",{className:"text-muted-foreground",children:"Loading your query history..."})]})}):(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h1",{className:"text-2xl font-bold text-foreground",children:"Query History"}),(0,b.jsx)("p",{className:"text-muted-foreground mt-1",children:"View all your past predictions, searches, and comparisons"})]}),r&&(0,b.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,b.jsx)("div",{className:"bg-card/50 backdrop-blur-sm rounded-xl shadow-md border border-border/50 p-6",children:(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)("div",{className:"w-12 h-12 bg-primary/100 rounded-lg flex items-center justify-center",children:(0,b.jsx)("span",{className:"text-2xl",children:"ðŸ“ˆ"})}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:"Total Queries"}),(0,b.jsx)("p",{className:"text-2xl font-bold text-foreground",children:r.totalQueries})]})]})}),(0,b.jsx)("div",{className:"bg-card/50 backdrop-blur-sm rounded-xl shadow-md border border-border/50 p-6",children:(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)("div",{className:"w-12 h-12 bg-purple-100 rounded-lg flex items-center justify-center",children:(0,b.jsx)("span",{className:"text-2xl",children:"ðŸ•"})}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:"Most Recent"}),(0,b.jsx)("p",{className:"text-lg font-semibold text-foreground",children:x(r.mostRecentDate)})]})]})}),(0,b.jsx)("div",{className:"bg-card/50 backdrop-blur-sm rounded-xl shadow-md border border-border/50 p-6",children:(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)("div",{className:"w-12 h-12 bg-green-100 rounded-lg flex items-center justify-center",children:(0,b.jsx)("span",{className:"text-2xl",children:y(r.mostCommonType)})}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:"Most Common"}),(0,b.jsx)("p",{className:"text-sm font-semibold text-foreground",children:"AI Prediction - Player Prop"===r.mostCommonType?"Player Props":"AI Prediction - Game Outcome"===r.mostCommonType?"Game Predictions":"Player Comparison"===r.mostCommonType?"Comparisons":"Player Stats"})]})]})})]}),(0,b.jsx)("div",{className:"bg-card/50 backdrop-blur-sm rounded-xl shadow-md border border-border/50 p-4",children:(0,b.jsx)("div",{className:"flex flex-wrap gap-2",children:[{value:"all",label:"All"},{value:"AI Prediction - Player Prop",label:"Player Props"},{value:"AI Prediction - Game Outcome",label:"Game Predictions"},{value:"Player Stats",label:"Player Stats"},{value:"Player Comparison",label:"Comparisons"}].map(a=>(0,b.jsxs)("button",{onClick:()=>q(a.value),className:`px-4 py-2 rounded-lg font-medium transition-colors ${p===a.value?"bg-blue-600 text-white":"bg-secondary text-muted-foreground hover:bg-secondary/300"}`,children:[a.label,"all"!==a.value&&r&&(0,b.jsxs)("span",{className:"ml-2 text-xs opacity-75",children:["(",r.queryTypeCounts[a.value]||0,")"]})]},a.value))})}),j&&(0,b.jsxs)("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:[(0,b.jsxs)("p",{className:"text-red-800",children:["âš ï¸ ",j]}),(0,b.jsx)("button",{onClick:t,className:"mt-2 text-sm text-red-600 hover:text-red-700 font-medium underline",children:"Try again"})]}),j||0!==f.length?(0,b.jsx)("div",{className:"grid grid-cols-1 gap-4",children:f.map(a=>(0,b.jsx)("div",{className:"bg-card/50 backdrop-blur-sm rounded-xl shadow-md border border-border/50 hover:shadow-lg transition-shadow p-5 border-l-4 border-blue-500",children:(0,b.jsxs)("div",{className:"flex items-start justify-between gap-4",children:[(0,b.jsxs)("div",{className:"flex-1",children:[(0,b.jsxs)("span",{className:`inline-block px-3 py-1 rounded-full text-xs font-semibold border ${(a=>{switch(a){case"AI Prediction - Player Prop":return"bg-primary/100 text-blue-800 border-blue-200";case"AI Prediction - Game Outcome":return"bg-purple-100 text-purple-800 border-purple-200";case"Player Stats":return"bg-green-100 text-foreground border-border/50";case"Player Comparison":return"bg-orange-100 text-orange-800 border-orange-200"}})(a.query_type)} mb-3`,children:[y(a.query_type)," ",a.query_type]}),(0,b.jsx)("h3",{className:"text-lg font-semibold text-foreground mb-2",children:(a=>{switch(a.query_type){case"AI Prediction - Player Prop":let b=a.details;return`${b.playerName} - ${b.overUnder} ${b.threshold} ${b.propType}`;case"AI Prediction - Game Outcome":let c=a.details;return`${c.team1} vs ${c.team2}`;case"Player Stats":let d=a.details;return`${d.playerName} (${d.team})`;case"Player Comparison":let e=a.details;return`${e.player1.name} vs ${e.player2.name}`;default:return"Unknown query"}})(a)}),(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:x(a.created_at)})]}),(0,b.jsx)("button",{onClick:()=>{m(a),o(!0)},className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors font-medium whitespace-nowrap",children:"View Details"})]})},a.id))}):(0,b.jsxs)("div",{className:"bg-card/50 backdrop-blur-sm rounded-xl shadow-md border border-border/50 p-12 text-center",children:[(0,b.jsx)("div",{className:"w-20 h-20 bg-secondary rounded-full flex items-center justify-center mx-auto mb-4",children:(0,b.jsx)("span",{className:"text-4xl",children:"ðŸ“‹"})}),(0,b.jsx)("h3",{className:"text-xl font-semibold text-foreground mb-2",children:"No queries yet"}),(0,b.jsx)("p",{className:"text-muted-foreground mb-6",children:"Start using AI Predictions, Player Stats, or Player Comparison to see your history here"})]}),(0,b.jsx)(d,{query:l,isOpen:n,onClose:()=>{o(!1),m(null)}})]})}a.s(["default",()=>e],13333)}];

//# sourceMappingURL=app_dashboard_query-history_page_tsx_21a7c5ea._.js.map