module.exports=[57417,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(50944),e=a.i(7291),f=a.i(92258),g=a.i(43108),h=a.i(46842),i=a.i(70106);let j=(0,i.default)("trash-2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]),k=(0,i.default)("log-out",[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]]),l=(0,i.default)("triangle-alert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]),m=(0,i.default)("check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);var n=a.i(33508);function o(){let[a,i]=(0,c.useState)(null),[o,p]=(0,c.useState)(""),[q,r]=(0,c.useState)(!0),s=(0,d.useRouter)(),[t,u]=(0,c.useState)(""),[v,w]=(0,c.useState)(""),[x,y]=(0,c.useState)(!1),[z,A]=(0,c.useState)(""),[B,C]=(0,c.useState)(""),[D,E]=(0,c.useState)(""),[F,G]=(0,c.useState)(""),[H,I]=(0,c.useState)(""),[J,K]=(0,c.useState)(!1),[L,M]=(0,c.useState)(""),[N,O]=(0,c.useState)(""),[P,Q]=(0,c.useState)(""),[R,S]=(0,c.useState)(!1),[T,U]=(0,c.useState)(""),[V,W]=(0,c.useState)(""),[X,Y]=(0,c.useState)(""),[Z,$]=(0,c.useState)(!1),[_,aa]=(0,c.useState)(!1),[ab,ac]=(0,c.useState)("");(0,c.useEffect)(()=>{(async()=>{let{data:{user:a}}=await e.supabase.auth.getUser();if(!a)return s.push("/login");i(a);let b=await fetch(`/api/get-profile?userId=${a.id}`),c=await b.json();c.success&&c.profile&&(p(c.profile.username||""),Q(c.profile.username||"")),r(!1)})()},[s]);let ad=async b=>{b.preventDefault(),y(!0),C(""),A("");try{let b=await fetch("/api/update-email",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({userId:a?.id,newEmail:t,password:v})}),c=await b.json();if(!b.ok)throw Error(c.error||"Failed to update email");A(c.message),u(""),w("")}catch(a){C(a.message)}finally{y(!1)}},ae=async b=>{if(b.preventDefault(),K(!0),O(""),M(""),F!==H){O("Passwords do not match"),K(!1);return}if(F.length<8){O("Password must be at least 8 characters"),K(!1);return}try{let b=await fetch("/api/update-password",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({userId:a?.id,oldPassword:D,newPassword:F})}),c=await b.json();if(!b.ok)throw Error(c.error||"Failed to update password");M(c.message),E(""),G(""),I("")}catch(a){O(a.message)}finally{K(!1)}},af=async b=>{b.preventDefault(),S(!0),W(""),U("");try{let b=await fetch("/api/update-username",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({userId:a?.id,username:P})}),c=await b.json();if(!b.ok)throw Error(c.error||"Failed to update username");U(c.message),p(P),setTimeout(()=>{window.location.reload()},1500)}catch(a){W(a.message)}finally{S(!1)}},ag=async()=>{aa(!0),ac("");try{let b=await fetch("/api/delete-user",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({userId:a?.id,password:X})}),c=await b.json();if(!b.ok)throw Error(c.error||"Failed to delete account");await e.supabase.auth.signOut(),s.push("/")}catch(a){ac(a.message),aa(!1)}},ah=async()=>{await e.supabase.auth.signOut(),s.push("/login")};return q?(0,b.jsx)("div",{className:"flex items-center justify-center min-h-screen",children:(0,b.jsx)("div",{className:"text-muted-foreground",children:"Loading..."})}):(0,b.jsxs)("div",{className:"max-w-4xl mx-auto space-y-6",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h1",{className:"text-3xl font-bold text-foreground",children:"Account Settings"}),(0,b.jsx)("p",{className:"text-muted-foreground mt-2",children:"Manage your account preferences and security"})]}),(0,b.jsxs)("div",{className:"bg-blue-500/10 border border-blue-500/30 rounded-lg p-4 flex items-start gap-3 animate-in fade-in slide-in-from-top-2 duration-500",children:[(0,b.jsx)("svg",{className:"w-5 h-5 text-blue-500 flex-shrink-0 mt-0.5",fill:"currentColor",viewBox:"0 0 20 20",children:(0,b.jsx)("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z",clipRule:"evenodd"})}),(0,b.jsx)("div",{className:"flex-1",children:(0,b.jsx)("p",{className:"text-sm font-medium text-foreground",children:"Note: Since this is a free project, the AI may be rate limited. If that happens, please try again later."})})]}),(0,b.jsxs)("div",{className:"bg-card/50 backdrop-blur-sm rounded-2xl shadow-lg border border-border/50 p-6 transition-all duration-300 hover:shadow-xl",children:[(0,b.jsxs)("div",{className:"flex items-center gap-3 mb-4",children:[(0,b.jsx)("div",{className:"w-10 h-10 rounded-lg bg-primary/20 flex items-center justify-center",children:(0,b.jsx)(f.Mail,{className:"w-5 h-5 text-primary"})}),(0,b.jsxs)("div",{children:[(0,b.jsx)("h2",{className:"text-xl font-semibold text-foreground",children:"Change Email"}),(0,b.jsxs)("p",{className:"text-sm text-muted-foreground",children:["Current: ",a?.email]})]})]}),(0,b.jsxs)("form",{onSubmit:ad,className:"space-y-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-foreground mb-2",children:"New Email"}),(0,b.jsx)("input",{type:"email",value:t,onChange:a=>u(a.target.value),className:"w-full px-4 py-3 bg-background border border-border rounded-lg text-foreground placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent transition-all duration-200",placeholder:"newemail@example.com",required:!0})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-foreground mb-2",children:"Confirm Password"}),(0,b.jsx)("input",{type:"password",value:v,onChange:a=>w(a.target.value),className:"w-full px-4 py-3 bg-background border border-border rounded-lg text-foreground placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent transition-all duration-200",placeholder:"••••••••",required:!0})]}),B&&(0,b.jsxs)("div",{className:"flex items-center gap-2 p-3 bg-destructive/10 border border-destructive/20 text-destructive rounded-lg text-sm",children:[(0,b.jsx)(n.X,{className:"w-4 h-4"}),B]}),z&&(0,b.jsxs)("div",{className:"flex items-center gap-2 p-3 bg-green-500/10 border border-green-500/20 text-green-500 rounded-lg text-sm",children:[(0,b.jsx)(m,{className:"w-4 h-4"}),z]}),(0,b.jsx)("button",{type:"submit",disabled:x,className:"w-full py-3 px-4 bg-primary hover:bg-primary/90 text-primary-foreground font-semibold rounded-lg shadow-lg transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed hover:scale-[1.02] active:scale-[0.98]",children:x?"Updating...":"Update Email"})]})]}),(0,b.jsxs)("div",{className:"bg-card/50 backdrop-blur-sm rounded-2xl shadow-lg border border-border/50 p-6 transition-all duration-300 hover:shadow-xl",children:[(0,b.jsxs)("div",{className:"flex items-center gap-3 mb-4",children:[(0,b.jsx)("div",{className:"w-10 h-10 rounded-lg bg-primary/20 flex items-center justify-center",children:(0,b.jsx)(g.Lock,{className:"w-5 h-5 text-primary"})}),(0,b.jsxs)("div",{children:[(0,b.jsx)("h2",{className:"text-xl font-semibold text-foreground",children:"Change Password"}),(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:"Update your password"})]})]}),(0,b.jsxs)("form",{onSubmit:ae,className:"space-y-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-foreground mb-2",children:"Current Password"}),(0,b.jsx)("input",{type:"password",value:D,onChange:a=>E(a.target.value),className:"w-full px-4 py-3 bg-background border border-border rounded-lg text-foreground placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent transition-all duration-200",placeholder:"••••••••",required:!0})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-foreground mb-2",children:"New Password"}),(0,b.jsx)("input",{type:"password",value:F,onChange:a=>G(a.target.value),className:"w-full px-4 py-3 bg-background border border-border rounded-lg text-foreground placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent transition-all duration-200",placeholder:"••••••••",minLength:8,required:!0})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-foreground mb-2",children:"Confirm New Password"}),(0,b.jsx)("input",{type:"password",value:H,onChange:a=>I(a.target.value),className:"w-full px-4 py-3 bg-background border border-border rounded-lg text-foreground placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent transition-all duration-200",placeholder:"••••••••",required:!0})]}),N&&(0,b.jsxs)("div",{className:"flex items-center gap-2 p-3 bg-destructive/10 border border-destructive/20 text-destructive rounded-lg text-sm",children:[(0,b.jsx)(n.X,{className:"w-4 h-4"}),N]}),L&&(0,b.jsxs)("div",{className:"flex items-center gap-2 p-3 bg-green-500/10 border border-green-500/20 text-green-500 rounded-lg text-sm",children:[(0,b.jsx)(m,{className:"w-4 h-4"}),L]}),(0,b.jsx)("button",{type:"submit",disabled:J,className:"w-full py-3 px-4 bg-primary hover:bg-primary/90 text-primary-foreground font-semibold rounded-lg shadow-lg transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed hover:scale-[1.02] active:scale-[0.98]",children:J?"Updating...":"Update Password"})]})]}),(0,b.jsxs)("div",{className:"bg-card/50 backdrop-blur-sm rounded-2xl shadow-lg border border-border/50 p-6 transition-all duration-300 hover:shadow-xl",children:[(0,b.jsxs)("div",{className:"flex items-center gap-3 mb-4",children:[(0,b.jsx)("div",{className:"w-10 h-10 rounded-lg bg-primary/20 flex items-center justify-center",children:(0,b.jsx)(h.User,{className:"w-5 h-5 text-primary"})}),(0,b.jsxs)("div",{children:[(0,b.jsx)("h2",{className:"text-xl font-semibold text-foreground",children:"Change Username"}),(0,b.jsxs)("p",{className:"text-sm text-muted-foreground",children:["Current: @",o||"Not set"]})]})]}),(0,b.jsxs)("form",{onSubmit:af,className:"space-y-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-foreground mb-2",children:"New Username"}),(0,b.jsx)("input",{type:"text",value:P,onChange:a=>Q(a.target.value.toLowerCase().replace(/[^a-z0-9_]/g,"")),className:"w-full px-4 py-3 bg-background border border-border rounded-lg text-foreground placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent transition-all duration-200",placeholder:"username",minLength:3,maxLength:20,pattern:"[a-z0-9_]{3,20}",required:!0}),(0,b.jsx)("p",{className:"text-xs text-muted-foreground mt-1",children:"3-20 characters, letters, numbers, and underscores only"})]}),V&&(0,b.jsxs)("div",{className:"flex items-center gap-2 p-3 bg-destructive/10 border border-destructive/20 text-destructive rounded-lg text-sm",children:[(0,b.jsx)(n.X,{className:"w-4 h-4"}),V]}),T&&(0,b.jsxs)("div",{className:"flex items-center gap-2 p-3 bg-green-500/10 border border-green-500/20 text-green-500 rounded-lg text-sm",children:[(0,b.jsx)(m,{className:"w-4 h-4"}),T]}),(0,b.jsx)("button",{type:"submit",disabled:R,className:"w-full py-3 px-4 bg-primary hover:bg-primary/90 text-primary-foreground font-semibold rounded-lg shadow-lg transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed hover:scale-[1.02] active:scale-[0.98]",children:R?"Updating...":"Update Username"})]})]}),(0,b.jsxs)("div",{className:"bg-destructive/5 backdrop-blur-sm rounded-2xl shadow-lg border border-destructive/20 p-6 transition-all duration-300 hover:shadow-xl",children:[(0,b.jsxs)("div",{className:"flex items-center gap-3 mb-4",children:[(0,b.jsx)("div",{className:"w-10 h-10 rounded-lg bg-destructive/20 flex items-center justify-center",children:(0,b.jsx)(j,{className:"w-5 h-5 text-destructive"})}),(0,b.jsxs)("div",{children:[(0,b.jsx)("h2",{className:"text-xl font-semibold text-destructive",children:"Delete Account"}),(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:"Permanently delete your account and all data"})]})]}),(0,b.jsx)("button",{onClick:()=>$(!0),className:"w-full py-3 px-4 bg-destructive hover:bg-destructive/90 text-white font-semibold rounded-lg shadow-lg transition-all duration-200 hover:scale-[1.02] active:scale-[0.98]",children:"Delete Account"})]}),(0,b.jsxs)("div",{className:"bg-card/50 backdrop-blur-sm rounded-2xl shadow-lg border border-border/50 p-6 transition-all duration-300 hover:shadow-xl",children:[(0,b.jsxs)("div",{className:"flex items-center gap-3 mb-4",children:[(0,b.jsx)("div",{className:"w-10 h-10 rounded-lg bg-secondary flex items-center justify-center",children:(0,b.jsx)(k,{className:"w-5 h-5 text-foreground"})}),(0,b.jsxs)("div",{children:[(0,b.jsx)("h2",{className:"text-xl font-semibold text-foreground",children:"Sign Out"}),(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:"Sign out of your account"})]})]}),(0,b.jsx)("button",{onClick:ah,className:"w-full py-3 px-4 bg-secondary hover:bg-secondary/80 text-foreground font-semibold rounded-lg shadow-lg transition-all duration-200 hover:scale-[1.02] active:scale-[0.98]",children:"Sign Out"})]}),Z&&(0,b.jsx)("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm z-50 flex items-center justify-center p-4",children:(0,b.jsxs)("div",{className:"bg-card rounded-2xl shadow-2xl border border-border/50 max-w-md w-full p-6 space-y-4",children:[(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)("div",{className:"w-12 h-12 rounded-lg bg-destructive/20 flex items-center justify-center",children:(0,b.jsx)(l,{className:"w-6 h-6 text-destructive"})}),(0,b.jsxs)("div",{children:[(0,b.jsx)("h3",{className:"text-xl font-bold text-foreground",children:"Delete Account?"}),(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:"This action cannot be undone"})]})]}),(0,b.jsx)("p",{className:"text-foreground",children:"Are you sure you want to delete your account? All your data, including queries, stats, and preferences will be permanently removed."}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-foreground mb-2",children:"Confirm with Password"}),(0,b.jsx)("input",{type:"password",value:X,onChange:a=>Y(a.target.value),className:"w-full px-4 py-3 bg-background border border-border rounded-lg text-foreground placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-destructive focus:border-transparent transition-all duration-200",placeholder:"••••••••"})]}),ab&&(0,b.jsxs)("div",{className:"flex items-center gap-2 p-3 bg-destructive/10 border border-destructive/20 text-destructive rounded-lg text-sm",children:[(0,b.jsx)(n.X,{className:"w-4 h-4"}),ab]}),(0,b.jsxs)("div",{className:"flex gap-3",children:[(0,b.jsx)("button",{onClick:()=>{$(!1),Y(""),ac("")},className:"flex-1 py-3 px-4 bg-secondary hover:bg-secondary/80 text-foreground font-semibold rounded-lg transition-all duration-200",children:"Cancel"}),(0,b.jsx)("button",{onClick:ag,disabled:_||!X,className:"flex-1 py-3 px-4 bg-destructive hover:bg-destructive/90 text-white font-semibold rounded-lg transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed",children:_?"Deleting...":"Delete Forever"})]})]})})]})}a.s(["default",()=>o],57417)}];

//# sourceMappingURL=app_dashboard_settings_page_tsx_831e41af._.js.map